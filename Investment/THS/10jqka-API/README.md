# 10jqka-API 项目说明文档

## 项目简介

10jqka-API 是一个针对同花顺金融客户端协议的逆向工程项目，用Java语言实现。该项目目前已完成了同花顺客户端的登录协议分析与实现，包括设备信息初始化、短信验证登录、持久化登录状态等功能，为开发者提供了与同花顺服务器进行通信的基础框架。

## 技术架构

### 项目结构

```
├── src/main/java/
│   ├── Main.java              # 主程序入口
│   ├── Test.java              # 测试代码
│   ├── core/                  # 核心功能包
│   │   └── ThsCore.java       # 核心实现类，处理与服务器的通信
│   ├── thsCrack/              # 协议破解相关类
│   │   ├── Actions.java       # 操作相关类
│   │   ├── Constants.java     # 常量定义
│   │   ├── HTTP.java          # HTTP相关功能
│   │   ├── StuffTableStruct.java # 数据表结构类
│   │   └── ...                # 其他辅助类
│   └── utils/                 # 工具类包
├── pom.xml                    # Maven项目配置
```

### 技术栈

- **编程语言**: Java 21
- **构建工具**: Maven
- **依赖库**: snappy-java 1.1.10.1（用于数据压缩/解压缩）

## 核心功能

### 1. 服务器连接管理

项目实现了与同花顺服务器的TCP连接建立、维护和数据收发功能。通过`ThsCore`类中的`connectThsServer()`方法，可以建立与同花顺服务器的连接。

### 2. 登录认证系统

- **设备信息初始化**: 发送设备指纹信息到服务器进行设备认证
- **短信验证码登录**: 支持手机号+短信验证码的登录方式
- **持久化登录**: 登录成功后生成`passport.dat`文件，保存登录凭证，下次启动时自动登录

### 3. 数据解析框架

项目包含了多个用于解析同花顺协议数据的类，如`StuffTableStruct`、`ewa`等，可用于解析服务器返回的结构化数据。

## 使用指南

### 前提条件

- JDK 21 或更高版本
- Maven 3.x

### 编译和运行

1. 克隆项目代码到本地
2. 使用Maven编译项目：
   ```bash
   mvn clean package
   ```
3. 运行主程序：
   ```bash
   java -cp target/ThsProject-1.0-SNAPSHOT.jar Main
   ```

### 首次使用流程

1. 运行程序后，系统会自动连接同花顺服务器
2. 由于是首次使用，系统会提示输入手机号
3. 系统向指定手机号发送短信验证码
4. 在程序中输入收到的验证码完成登录
5. 登录成功后，系统会在D盘根目录生成`passport.dat`文件

### 后续使用

- 第二次运行程序时，系统会自动读取`passport.dat`文件中的登录凭证
- 无需再次输入手机号和验证码，实现自动登录

## 开发扩展指南

### 获取股票数据

项目目前仅完成了登录功能，如果需要获取股票数据，可以参考以下步骤：

1. 使用Frida工具Hook同花顺客户端中的`StuffTableStruct`类
2. 使用Wireshark等网络抓包工具分析数据包结构
3. 参考项目中的数据处理类实现自定义的数据请求和解析逻辑

### 核心类说明

- **ThsCore**: 核心类，负责建立连接、发送请求和处理响应
- **ewa**: 数据处理类，用于解析服务器返回的数据
- **fjc**: 加密工具类，处理数据加密和解密
- **StuffTableStruct**: 数据表结构类，用于解析表格数据

## 注意事项

1. 本项目仅供学习和研究使用，请勿用于商业用途
2. 逆向工程可能涉及法律风险，请确保遵守相关法律法规
3. 项目中的代码可能需要根据同花顺客户端的更新进行调整
4. 当前版本仅实现了登录功能，获取具体数据需要自行扩展开发

## 免责声明

本项目基于公开信息和技术进行开发，仅用于学习和研究目的。使用本项目产生的任何后果由使用者自行承担，与项目开发者无关。
