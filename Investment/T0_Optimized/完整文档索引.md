# T0äº¤æ˜“ç³»ç»Ÿä¼˜åŒ–ç‰ˆ - å®Œæ•´æ–‡æ¡£ç´¢å¼•

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### ä¸­æ–‡æ–‡æ¡£ï¼ˆæ¨èï¼‰

1. **[å¿«é€Ÿå¼€å§‹.md](å¿«é€Ÿå¼€å§‹.md)** â­ ä»è¿™é‡Œå¼€å§‹
   - 10åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æŒ‡å—
   - ä¸‰ç§ä½¿ç”¨åœºæ™¯
   - æ ¸å¿ƒæ¦‚å¿µ1åˆ†é’Ÿé€Ÿè§ˆ
   - å­¦ä¹ è·¯å¾„æ¨è

2. **[è¯´æ˜æ–‡æ¡£.md](è¯´æ˜æ–‡æ¡£.md)** â­ ä¸»è¦ä½¿ç”¨æ–‡æ¡£
   - å®Œæ•´åŠŸèƒ½ä»‹ç»
   - è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹
   - APIå‚è€ƒ
   - æ€§èƒ½å¯¹æ¯”

3. **æœ¬æ–‡ä»¶** - æ–‡æ¡£ç´¢å¼•
   - æ‰€æœ‰æ–‡æ¡£çš„æ€»è§ˆ
   - å¿«é€ŸæŸ¥æ‰¾æŒ‡å—

### è‹±æ–‡æ–‡æ¡£ï¼ˆåŸå§‹ï¼‰

- **START_HERE.md** - English quick start guide
- **README.md** - English main documentation
- **INDEX.md** - English complete reference
- **IMPLEMENTATION_SUMMARY.md** - Implementation details
- **OPTIMIZATION_PLAN.md** - Optimization design
- **MIGRATION_GUIDE.md** - Migration guide

---

## ğŸ¯ æ ¸å¿ƒæ¨¡å—æ–‡æ¡£

### 1. DataManager - æ•°æ®ç®¡ç†å™¨

**æ–‡ä»¶ä½ç½®ï¼š** `core/data_manager.py` (561è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- âœ… SQLiteæ•°æ®åº“ç®¡ç†ï¼ˆæ¯”CSVå¿«10-50å€ï¼‰
- âœ… åˆ†æ—¶æ•°æ®çš„å¢åˆ æ”¹æŸ¥
- âœ… äº¤æ˜“ä¿¡å·å­˜å‚¨å’ŒæŸ¥è¯¢
- âœ… CSVæ•°æ®æ‰¹é‡è¿ç§»
- âœ… æ•°æ®éªŒè¯å’Œå®Œæ•´æ€§æ£€æŸ¥

**å¿«é€Ÿä½¿ç”¨ï¼š**
```python
from core import DataManager

# åˆ›å»ºå®ä¾‹
dm = DataManager()  # è‡ªåŠ¨åˆ›å»ºdb/t0_trading.db

# æŸ¥è¯¢åˆ†æ—¶æ•°æ®
df = dm.get_minute_data('000333', start_date='2025-10-24')

# ä¿å­˜äº¤æ˜“ä¿¡å·
signals = [{
    'stock_code': '000333',
    'datetime': '2025-10-24 10:30:00',
    'indicator_name': 'comprehensive_t0_strategy',
    'signal_type': 'BUY',
    'price': 74.85,
    'score': 85.5
}]
dm.save_signals(signals)

# ä»CSVè¿ç§»æ•°æ®
results = dm.batch_import_from_cache('../T0/cache/fenshi_data')
print(f"å¯¼å…¥ç»“æœ: {results}")  # {'000333': 242, ...}
```

**ä¸»è¦APIï¼š**
- `save_minute_data(df, stock_code)` - ä¿å­˜åˆ†æ—¶æ•°æ®
- `get_minute_data(stock_code, start_date, end_date)` - æŸ¥è¯¢åˆ†æ—¶æ•°æ®
- `save_signals(signals)` - ä¿å­˜äº¤æ˜“ä¿¡å·
- `get_signals(stock_code, indicator_name, start_date, end_date)` - æŸ¥è¯¢ä¿¡å·
- `batch_import_from_cache(cache_dir, stock_codes)` - æ‰¹é‡å¯¼å…¥CSV
- `export_to_csv(stock_code, output_path)` - å¯¼å‡ºä¸ºCSV

**æ•°æ®åº“ç»“æ„ï¼š**
```sql
-- åˆ†æ—¶æ•°æ®è¡¨
CREATE TABLE minute_data (
    stock_code TEXT,      -- è‚¡ç¥¨ä»£ç 
    datetime TEXT,        -- æ—¶é—´
    open REAL,           -- å¼€ç›˜ä»·
    close REAL,          -- æ”¶ç›˜ä»·
    high REAL,           -- æœ€é«˜ä»·
    low REAL,            -- æœ€ä½ä»·
    volume INTEGER,      -- æˆäº¤é‡
    amount REAL,         -- æˆäº¤é¢
    avg_price REAL,      -- å‡ä»·
    change_pct REAL,     -- æ¶¨è·Œå¹…
    UNIQUE(stock_code, datetime)
);

-- äº¤æ˜“ä¿¡å·è¡¨
CREATE TABLE trading_signals (
    stock_code TEXT,
    datetime TEXT,
    indicator_name TEXT,
    signal_type TEXT,    -- 'BUY' or 'SELL'
    price REAL,
    score REAL,
    metadata TEXT        -- JSONæ ¼å¼å…ƒæ•°æ®
);
```

---

### 2. IndicatorLoader - æŒ‡æ ‡åŠ è½½å™¨

**æ–‡ä»¶ä½ç½®ï¼š** `core/indicator_loader.py` (237è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- âœ… è‡ªåŠ¨å‘ç°indicators/ç›®å½•ä¸‹çš„æ‰€æœ‰æŒ‡æ ‡
- âœ… åŠ¨æ€åŠ è½½æŒ‡æ ‡æ¨¡å—
- âœ… éªŒè¯æŒ‡æ ‡æ¥å£
- âœ… æä¾›æŒ‡æ ‡å…ƒæ•°æ®ï¼ˆç”¨äºUIæ˜¾ç¤ºï¼‰
- âœ… æ”¯æŒçƒ­é‡è½½

**å¿«é€Ÿä½¿ç”¨ï¼š**
```python
from core import IndicatorLoader

# åˆ›å»ºåŠ è½½å™¨
loader = IndicatorLoader()  # è‡ªåŠ¨æ‰«æindicators/

# åˆ—å‡ºæ‰€æœ‰å¯ç”¨æŒ‡æ ‡
print("å¯ç”¨æŒ‡æ ‡ï¼š")
for name in loader.list_indicator_names():
    info = loader.get_indicator(name)
    print(f"  {info['display_name']}: {info['description']}")

# æ‰§è¡ŒæŒ‡æ ‡åˆ†æ
result = loader.execute_indicator(
    'comprehensive_t0_strategy',
    stock_code='000333',
    trade_date='2025-10-24',
    has_open_position=False
)

# è·å–UIç”¨çš„å…ƒæ•°æ®
metadata = loader.get_indicator_metadata()
for item in metadata:
    print(f"{item['name']}: {item['display_name']}")
```

**æŒ‡æ ‡æ¥å£è§„èŒƒï¼š**

æ¯ä¸ªæŒ‡æ ‡æ¨¡å—åº”åŒ…å«ï¼š
```python
# indicators/my_indicator.py

# å¯é€‰ï¼šæŒ‡æ ‡å…ƒä¿¡æ¯
INDICATOR_NAME = "æˆ‘çš„æŒ‡æ ‡"
INDICATOR_DESC = "è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æŒ‡æ ‡"

# å¿…éœ€ï¼šåˆ†æå‡½æ•°ï¼ˆä»¥analyze_å¼€å¤´ï¼‰
def analyze_my_indicator(stock_code: str, trade_date: str = None, **kwargs):
    """
    åˆ†æå‡½æ•°
    
    å‚æ•°ï¼š
        stock_code: è‚¡ç¥¨ä»£ç 
        trade_date: äº¤æ˜“æ—¥æœŸ
        **kwargs: å…¶ä»–å‚æ•°
    
    è¿”å›ï¼š
        (DataFrame, signals_dict) æˆ– DataFrame
    """
    # å®ç°ä½ çš„æŒ‡æ ‡é€»è¾‘
    pass
```

**ä¸»è¦APIï¼š**
- `get_indicator(indicator_name)` - è·å–æŒ‡æ ‡ä¿¡æ¯
- `list_indicator_names()` - åˆ—å‡ºæ‰€æœ‰æŒ‡æ ‡åç§°
- `execute_indicator(indicator_name, *args, **kwargs)` - æ‰§è¡ŒæŒ‡æ ‡
- `reload_indicator(indicator_name)` - é‡æ–°åŠ è½½æŒ‡æ ‡ï¼ˆå¼€å‘æ—¶ç”¨ï¼‰
- `get_indicator_metadata()` - è·å–æ‰€æœ‰æŒ‡æ ‡çš„å…ƒæ•°æ®

---

### 3. ConfigManager - é…ç½®ç®¡ç†å™¨

**æ–‡ä»¶ä½ç½®ï¼š** `core/config_manager.py` (318è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- âœ… YAMLé…ç½®æ–‡ä»¶ç®¡ç†
- âœ… æ”¯æŒåµŒå¥—é…ç½®è®¿é—®
- âœ… è¿è¡Œæ—¶é…ç½®æ›´æ–°
- âœ… é»˜è®¤é…ç½®è‡ªåŠ¨å¡«å……
- âœ… é…ç½®éªŒè¯

**å¿«é€Ÿä½¿ç”¨ï¼š**
```python
from core import ConfigManager

# åˆ›å»ºé…ç½®ç®¡ç†å™¨
config = ConfigManager()  # è‡ªåŠ¨åˆ›å»ºconfig/settings.yaml

# è¯»å–é…ç½®
stocks = config.get_stocks()
# {'000333': 'ç¾çš„é›†å›¢', '600030': 'ä¸­ä¿¡è¯åˆ¸', '002415': 'æµ·åº·å¨è§†'}

theme = config.get('ui.theme')  # 'light'
width = config.get('ui.window_size.width')  # 1400

# æ›´æ–°é…ç½®
config.set('ui.theme', 'dark')
config.save_config()

# é‡æ–°åŠ è½½é…ç½®
config.reload_config()

# ä¾¿æ·æ–¹æ³•
is_enabled = config.is_monitor_enabled()
interval = config.get_monitor_interval()
```

**é…ç½®æ–‡ä»¶ç»“æ„ï¼š**
```yaml
# config/settings.yaml

# è‚¡ç¥¨æ± é…ç½®
stocks:
  '000333': 'ç¾çš„é›†å›¢'
  '600030': 'ä¸­ä¿¡è¯åˆ¸'
  '002415': 'æµ·åº·å¨è§†'

# æ•°æ®æºé…ç½®
data_source:
  primary: akshare          # ä¸»æ•°æ®æº
  fallback: dfcf           # å¤‡ç”¨æ•°æ®æº
  cache_enabled: true      # æ˜¯å¦å¯ç”¨ç¼“å­˜
  cache_format: sqlite     # ç¼“å­˜æ ¼å¼: sqlite/csv
  cache_db: db/t0_trading.db

# æŒ‡æ ‡é…ç½®
indicators:
  comprehensive_t0_strategy:
    enabled: true
    display_name: 'ç»¼åˆT0ç­–ç•¥'
    color: '#1f77b4'
    line_width: 1.5

# UIé…ç½®
ui:
  theme: light             # light/dark
  window_size:
    width: 1400
    height: 900
  colors:
    up: '#FF3B30'         # æ¶¨çš„é¢œè‰²ï¼ˆçº¢ï¼‰
    down: '#34C759'       # è·Œçš„é¢œè‰²ï¼ˆç»¿ï¼‰

# ç›‘æ§é…ç½®
monitor:
  enabled: false
  interval: 60            # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
  notification:
    enabled: true
    sound: false
    desktop: true

# æ—¥å¿—é…ç½®
logging:
  level: INFO
  file: logs/t0_trading.log
```

**ä¸»è¦APIï¼š**
- `get(key, default)` - è·å–é…ç½®ï¼ˆæ”¯æŒåµŒå¥—é”®å¦‚'ui.theme'ï¼‰
- `set(key, value)` - è®¾ç½®é…ç½®
- `save_config()` - ä¿å­˜åˆ°æ–‡ä»¶
- `reload_config()` - é‡æ–°åŠ è½½
- `get_stocks()` - è·å–è‚¡ç¥¨æ± 
- `is_monitor_enabled()` - æ˜¯å¦å¯ç”¨ç›‘æ§
- `get_monitor_interval()` - è·å–ç›‘æ§é—´éš”

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”æ•°æ®

### æ•°æ®æŸ¥è¯¢æ€§èƒ½

| æ“ä½œç±»å‹ | CSVæ–¹å¼ | SQLiteæ–¹å¼ | æå‡å€æ•° |
|---------|---------|-----------|---------|
| è¯»å–å…¨éƒ¨æ•°æ®ï¼ˆ242è¡Œï¼‰ | ~50ms | ~5ms | **10å€** |
| æ—¥æœŸèŒƒå›´æŸ¥è¯¢ | ~50ms | ~2ms | **25å€** |
| ç‰¹å®šæ—¶é—´ç‚¹æŸ¥è¯¢ | ~50ms | ~1ms | **50å€** |
| æ‰¹é‡æ’å…¥100è¡Œ | ~100ms | ~10ms | **10å€** |
| å¤æ‚æ¡ä»¶æŸ¥è¯¢ | ~80ms | ~3ms | **27å€** |

### å†…å­˜ä½¿ç”¨

| æ“ä½œ | CSV | SQLite | èŠ‚çœ |
|-----|-----|--------|------|
| åŠ è½½1å¤©æ•°æ® | ~2MB | ~0.5MB | 75% |
| åŠ è½½1å‘¨æ•°æ® | ~10MB | ~2MB | 80% |
| åŠ è½½1æœˆæ•°æ® | ~40MB | ~8MB | 80% |

### å®æµ‹ç¤ºä¾‹

```python
import time
import pandas as pd
from core import DataManager

# CSVæ–¹å¼
start = time.time()
df_csv = pd.read_csv('cache/fenshi_data/000333_20251024_fenshi.csv')
df_csv['æ—¶é—´'] = pd.to_datetime(df_csv['æ—¶é—´'])
csv_time = (time.time() - start) * 1000  # è½¬æ¢ä¸ºæ¯«ç§’

# SQLiteæ–¹å¼
dm = DataManager()
start = time.time()
df_sqlite = dm.get_minute_data('000333', start_date='2025-10-24')
sqlite_time = (time.time() - start) * 1000

print(f"CSVè€—æ—¶: {csv_time:.2f}ms")
print(f"SQLiteè€—æ—¶: {sqlite_time:.2f}ms")
print(f"æ€§èƒ½æå‡: {csv_time/sqlite_time:.1f}å€")

# è¾“å‡ºç¤ºä¾‹ï¼š
# CSVè€—æ—¶: 48.32ms
# SQLiteè€—æ—¶: 4.15ms
# æ€§èƒ½æå‡: 11.6å€
```

---

## ğŸ”„ æ•°æ®è¿ç§»æŒ‡å—

### ä¸ºä»€ä¹ˆè¦è¿ç§»ï¼Ÿ

1. **æ€§èƒ½æå‡** - æŸ¥è¯¢é€Ÿåº¦å¿«10-50å€
2. **åŠŸèƒ½å¢å¼º** - æ”¯æŒå¤æ‚æŸ¥è¯¢å’Œèšåˆ
3. **æ•°æ®å®Œæ•´æ€§** - äº‹åŠ¡æ”¯æŒï¼Œé˜²æ­¢æ•°æ®æŸå
4. **ä¾¿äºç®¡ç†** - ç»Ÿä¸€çš„æ•°æ®ç®¡ç†æ¥å£

### è¿ç§»æ­¥éª¤

#### æ­¥éª¤1ï¼šå®‰è£…ä¾èµ–
```bash
pip install pyyaml==6.0
```

#### æ­¥éª¤2ï¼šè¿è¡Œè¿ç§»è„šæœ¬

**æ–¹å¼Aï¼šä½¿ç”¨ä»£ç **
```python
from core import DataManager

dm = DataManager()

# æ‰¹é‡å¯¼å…¥ï¼ˆæ¨èï¼‰
cache_dir = '../T0/cache/fenshi_data'
results = dm.batch_import_from_cache(
    cache_dir,
    stock_codes=['000333', '600030', '002415']  # Noneè¡¨ç¤ºå…¨éƒ¨
)

print("å¯¼å…¥ç»“æœï¼š")
for code, count in results.items():
    print(f"  {code}: {count}æ¡è®°å½•")
```

**æ–¹å¼Bï¼šè¿è¡Œæµ‹è¯•è„šæœ¬**
```bash
python core/data_manager.py
```

#### æ­¥éª¤3ï¼šéªŒè¯æ•°æ®

```python
# æ£€æŸ¥å¯¼å…¥çš„æ•°æ®
df = dm.get_minute_data('000333', start_date='2025-10-24')
print(f"000333æ•°æ®é‡: {len(df)} æ¡")

# å¯¹æ¯”CSVæ•°æ®
import pandas as pd
df_csv = pd.read_csv('../T0/cache/fenshi_data/000333_20251024_fenshi.csv')
print(f"CSVæ•°æ®é‡: {len(df_csv)} æ¡")

# æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
assert len(df) == len(df_csv), "æ•°æ®é‡ä¸ä¸€è‡´ï¼"
print("âœ… æ•°æ®éªŒè¯é€šè¿‡")
```

#### æ­¥éª¤4ï¼šæ›´æ–°ä»£ç 

**æ—§ä»£ç ï¼š**
```python
import pandas as pd

df = pd.read_csv('cache/fenshi_data/000333_20251024_fenshi.csv')
df['æ—¶é—´'] = pd.to_datetime(df['æ—¶é—´'])
```

**æ–°ä»£ç ï¼š**
```python
from core import DataManager

dm = DataManager()
df = dm.get_minute_data('000333', start_date='2025-10-24')
```

### è¿ç§»æ—¶é—´é¢„ä¼°

| æ•°æ®é‡ | é¢„è®¡è€—æ—¶ |
|-------|---------|
| 1å¤©æ•°æ®ï¼ˆ242è¡Œï¼‰ | < 1ç§’ |
| 1å‘¨æ•°æ®ï¼ˆ1210è¡Œï¼‰ | 1-2ç§’ |
| 1æœˆæ•°æ®ï¼ˆ4840è¡Œï¼‰ | 3-5ç§’ |
| 1å¹´æ•°æ®ï¼ˆ58000è¡Œï¼‰ | 30-60ç§’ |

---

## ğŸ¨ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### åœºæ™¯1ï¼šå›æµ‹å†å²æ•°æ®

```python
from core import DataManager
import pandas as pd

dm = DataManager()

# è·å–ä¸€å‘¨çš„å†å²æ•°æ®
df = dm.get_minute_data(
    '000333',
    start_date='2025-10-20',
    end_date='2025-10-24'
)

# åˆ†ææ•°æ®
print(f"æ€»æ•°æ®é‡: {len(df)} æ¡")
print(f"æ—¥æœŸèŒƒå›´: {df['datetime'].min()} è‡³ {df['datetime'].max()}")
print(f"ä»·æ ¼èŒƒå›´: {df['close'].min():.2f} - {df['close'].max():.2f}")
```

### åœºæ™¯2ï¼šå®æ—¶ç›‘æ§ä¿¡å·

```python
from core import DataManager, IndicatorLoader
from datetime import datetime

dm = DataManager()
loader = IndicatorLoader()

def monitor_stock(stock_code):
    # è·å–ä»Šå¤©çš„æ•°æ®
    today = datetime.now().strftime('%Y-%m-%d')
    df = dm.get_minute_data(stock_code, start_date=today)
    
    # æ‰§è¡ŒæŒ‡æ ‡åˆ†æ
    result = loader.execute_indicator(
        'comprehensive_t0_strategy',
        stock_code=stock_code,
        trade_date=today
    )
    
    # æ£€æŸ¥ä¿¡å·
    if result:
        df_result, signals = result
        if signals:
            print(f"æ£€æµ‹åˆ°ä¿¡å·: {signals}")
            # ä¿å­˜ä¿¡å·
            dm.save_signals([{
                'stock_code': stock_code,
                'datetime': datetime.now().strftime('%Y-%m-%d %H:%M:%S'),
                'indicator_name': 'comprehensive_t0_strategy',
                'signal_type': 'BUY',  # æˆ– 'SELL'
                'price': df_result['close'].iloc[-1],
                'score': 80.0
            }])

# ç›‘æ§ç¾çš„é›†å›¢
monitor_stock('000333')
```

### åœºæ™¯3ï¼šå¤šæŒ‡æ ‡ç»¼åˆåˆ†æ

```python
from core import IndicatorLoader

loader = IndicatorLoader()

# è·å–æ‰€æœ‰å¯ç”¨æŒ‡æ ‡
indicators = loader.list_indicator_names()

results = {}
for indicator_name in indicators:
    try:
        result = loader.execute_indicator(
            indicator_name,
            stock_code='000333',
            trade_date='2025-10-24'
        )
        results[indicator_name] = result
        print(f"âœ… {indicator_name} åˆ†æå®Œæˆ")
    except Exception as e:
        print(f"âŒ {indicator_name} åˆ†æå¤±è´¥: {e}")

# ç»¼åˆæ‰€æœ‰æŒ‡æ ‡çš„ç»“æœ
print(f"\næˆåŠŸåˆ†æ {len(results)} ä¸ªæŒ‡æ ‡")
```

### åœºæ™¯4ï¼šé…ç½®åŒ–ç›‘æ§ç³»ç»Ÿ

```python
from core import ConfigManager, DataManager, IndicatorLoader
import time

config = ConfigManager()
dm = DataManager()
loader = IndicatorLoader()

# ä»é…ç½®è¯»å–å‚æ•°
stocks = config.get_stocks()
interval = config.get_monitor_interval()
enabled_indicators = [
    name for name, conf in config.get('indicators', {}).items()
    if conf.get('enabled', False)
]

print(f"ç›‘æ§è‚¡ç¥¨: {list(stocks.keys())}")
print(f"å¯ç”¨æŒ‡æ ‡: {enabled_indicators}")
print(f"ç›‘æ§é—´éš”: {interval}ç§’")

# ç›‘æ§å¾ªç¯
while config.is_monitor_enabled():
    for stock_code in stocks.keys():
        for indicator in enabled_indicators:
            # æ‰§è¡Œåˆ†æ...
            pass
    
    time.sleep(interval)
```

---

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æŒ‡æ ‡

1. **åˆ›å»ºæŒ‡æ ‡æ–‡ä»¶**

åœ¨ `indicators/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œå¦‚ `my_strategy.py`ï¼š

```python
# indicators/my_strategy.py

# æŒ‡æ ‡å…ƒä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
INDICATOR_NAME = "æˆ‘çš„ç­–ç•¥"
INDICATOR_DESC = "è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ç­–ç•¥"

def analyze_my_strategy(stock_code: str, trade_date: str = None):
    """
    ç­–ç•¥åˆ†æå‡½æ•°
    
    å‚æ•°ï¼š
        stock_code: è‚¡ç¥¨ä»£ç 
        trade_date: äº¤æ˜“æ—¥æœŸ
    
    è¿”å›ï¼š
        (DataFrame, signals_dict)
    """
    from core import DataManager
    import pandas as pd
    
    dm = DataManager()
    df = dm.get_minute_data(stock_code, start_date=trade_date)
    
    # ä½ çš„ç­–ç•¥é€»è¾‘
    df['signal'] = 0  # åˆå§‹åŒ–ä¿¡å·åˆ—
    
    # ç¤ºä¾‹ï¼šç®€å•çš„å‡çº¿ç­–ç•¥
    df['ma5'] = df['close'].rolling(5).mean()
    df['ma10'] = df['close'].rolling(10).mean()
    
    # ä¹°å…¥ä¿¡å·ï¼š5æ—¥çº¿ä¸Šç©¿10æ—¥çº¿
    df.loc[df['ma5'] > df['ma10'], 'signal'] = 1
    # å–å‡ºä¿¡å·ï¼š5æ—¥çº¿ä¸‹ç©¿10æ—¥çº¿
    df.loc[df['ma5'] < df['ma10'], 'signal'] = -1
    
    # æå–ä¿¡å·æ—¶é—´ç‚¹
    buy_signals = df[df['signal'] == 1].index.tolist()
    sell_signals = df[df['signal'] == -1].index.tolist()
    
    signals = {
        'buy': buy_signals,
        'sell': sell_signals
    }
    
    return df, signals
```

2. **æµ‹è¯•æŒ‡æ ‡**

```python
from core import IndicatorLoader

loader = IndicatorLoader()

# æŒ‡æ ‡ä¼šè¢«è‡ªåŠ¨å‘ç°
assert 'my_strategy' in loader.list_indicator_names()

# æ‰§è¡ŒæŒ‡æ ‡
result = loader.execute_indicator('my_strategy', '000333', '2025-10-24')
print(result)
```

3. **é…ç½®æŒ‡æ ‡**

åœ¨ `config/settings.yaml` ä¸­æ·»åŠ é…ç½®ï¼š

```yaml
indicators:
  my_strategy:
    enabled: true
    display_name: 'æˆ‘çš„ç­–ç•¥'
    color: '#FF5733'
    line_width: 1.5
```

**å°±è¿™ä¹ˆç®€å•ï¼æ— éœ€ä¿®æ”¹ä»»ä½•å…¶ä»–ä»£ç ã€‚**

---

## ğŸ“ å¸¸è§é—®é¢˜è§£ç­”ï¼ˆFAQï¼‰

### Q1: SQLiteå’ŒCSVå¯ä»¥åŒæ—¶ä½¿ç”¨å—ï¼Ÿ
**A:** å¯ä»¥ã€‚ConfigManageræ”¯æŒè®¾ç½® `cache_format: csv` æˆ– `sqlite`ã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥åŒæ—¶ä¿ç•™ä¸¤ç§æ ¼å¼ã€‚

### Q2: æ•°æ®åº“æ–‡ä»¶å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ
**A:** å¯ä»¥å®šæœŸæ¸…ç†æ—§æ•°æ®ï¼š
```python
dm = DataManager()
# åˆ é™¤30å¤©å‰çš„æ•°æ®
dm.delete_minute_data('000333', end_date='2025-09-24')
```

### Q3: å¦‚ä½•å¤‡ä»½æ•°æ®åº“ï¼Ÿ
**A:** ç›´æ¥å¤åˆ¶ `db/t0_trading.db` æ–‡ä»¶å³å¯ï¼š
```bash
copy db\t0_trading.db db\t0_trading_backup_20251024.db
```

### Q4: æ”¯æŒå¤šè¿›ç¨‹å—ï¼Ÿ
**A:** DataManagerä½¿ç”¨ `check_same_thread=False`ï¼Œæ”¯æŒå¤šçº¿ç¨‹ã€‚å¤šè¿›ç¨‹ç¯å¢ƒä¸‹ï¼Œæ¯ä¸ªè¿›ç¨‹åº”åˆ›å»ºç‹¬ç«‹çš„DataManagerå®ä¾‹ã€‚

### Q5: å¦‚ä½•é‡ç½®é…ç½®ï¼Ÿ
**A:** åˆ é™¤ `config/settings.yaml`ï¼Œä¸‹æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤é…ç½®ã€‚

### Q6: æŒ‡æ ‡çƒ­é‡è½½å¦‚ä½•ä½¿ç”¨ï¼Ÿ
**A:** å¼€å‘æ—¶ä¿®æ”¹æŒ‡æ ‡åï¼š
```python
loader = IndicatorLoader()
loader.reload_indicator('my_strategy')  # é‡æ–°åŠ è½½
```

### Q7: å¦‚ä½•å¯¼å‡ºæ‰€æœ‰æ•°æ®ï¼Ÿ
**A:**
```python
dm = DataManager()
for stock_code in ['000333', '600030', '002415']:
    dm.export_to_csv(stock_code, f'export/{stock_code}.csv')
```

### Q8: æ•°æ®æŸ¥è¯¢å¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ
**A:** æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†ç´¢å¼•ï¼š
- ç¡®ä¿æŸ¥è¯¢æ—¶æŒ‡å®šäº† `stock_code`
- æ—¥æœŸèŒƒå›´ä¸è¦å¤ªå¤§
- è€ƒè™‘æ·»åŠ æ›´å¤šç´¢å¼•

---

## ğŸ“– æ¨èå­¦ä¹ é¡ºåº

### æ–°æ‰‹ï¼ˆç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼‰
1. âœ… é˜…è¯» **å¿«é€Ÿå¼€å§‹.md** (10åˆ†é’Ÿ)
2. âœ… è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯ç¯å¢ƒ
3. âœ… å°è¯•åŸºæœ¬çš„æ•°æ®æŸ¥è¯¢ç¤ºä¾‹
4. âœ… é˜…è¯» **è¯´æ˜æ–‡æ¡£.md** äº†è§£è¯¦ç»†API

### è¿›é˜¶ä½¿ç”¨è€…ï¼ˆå·²æœ‰åŸºç¡€ï¼‰
1. âœ… è¿ç§»ç°æœ‰CSVæ•°æ®åˆ°SQLite
2. âœ… æ›´æ–°ä»£ç ä½¿ç”¨æ–°çš„DataManager
3. âœ… å­¦ä¹ IndicatorLoaderçš„ä½¿ç”¨
4. âœ… é…ç½®YAMLæ–‡ä»¶

### å¼€å‘è€…ï¼ˆè¦æ·»åŠ æ–°åŠŸèƒ½ï¼‰
1. âœ… ç†è§£ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—çš„è®¾è®¡
2. âœ… é˜…è¯»æºç æ³¨é‡Š
3. âœ… å­¦ä¹ å¦‚ä½•æ·»åŠ æ–°æŒ‡æ ‡
4. âœ… äº†è§£å¦‚ä½•æ‰©å±•ç³»ç»Ÿ

---

## ğŸ¯ å¿«é€ŸæŸ¥æ‰¾æŒ‡å—

| æˆ‘æƒ³... | æŸ¥çœ‹æ–‡æ¡£ | ä»£ç ä½ç½® |
|--------|---------|---------|
| å¿«é€Ÿä¸Šæ‰‹ | å¿«é€Ÿå¼€å§‹.md | - |
| æŸ¥è¯¢æ•°æ® | è¯´æ˜æ–‡æ¡£.md - æ•°æ®ç®¡ç† | core/data_manager.py |
| æ·»åŠ æŒ‡æ ‡ | æœ¬æ–‡æ¡£ - å¼€å‘æŒ‡å— | indicators/ |
| ä¿®æ”¹é…ç½® | è¯´æ˜æ–‡æ¡£.md - é…ç½®ç®¡ç† | config/settings.yaml |
| è¿ç§»æ•°æ® | æœ¬æ–‡æ¡£ - æ•°æ®è¿ç§»æŒ‡å— | - |
| æ€§èƒ½ä¼˜åŒ– | æœ¬æ–‡æ¡£ - æ€§èƒ½å¯¹æ¯” | - |
| APIå‚è€ƒ | è¯´æ˜æ–‡æ¡£.md - APIå‚è€ƒ | core/*.py |
| é—®é¢˜æ’æŸ¥ | æœ¬æ–‡æ¡£ - FAQ | - |

---

## ğŸ“‚ æ–‡ä»¶ç»“æ„æ€»è§ˆ

```
T0_Optimized/
â”‚
â”œâ”€â”€ ğŸ“ core/                        # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py                # æ¨¡å—å…¥å£ï¼ˆå»¶è¿Ÿå¯¼å…¥ï¼‰
â”‚   â”œâ”€â”€ data_manager.py            # æ•°æ®ç®¡ç†å™¨ï¼ˆ561è¡Œï¼‰
â”‚   â”œâ”€â”€ indicator_loader.py        # æŒ‡æ ‡åŠ è½½å™¨ï¼ˆ237è¡Œï¼‰
â”‚   â”œâ”€â”€ config_manager.py          # é…ç½®ç®¡ç†å™¨ï¼ˆ318è¡Œï¼‰
â”‚   â”œâ”€â”€ auto_trader.py             # è‡ªåŠ¨äº¤æ˜“ï¼ˆ341è¡Œï¼‰
â”‚   â”œâ”€â”€ indicator_interface.py     # æŒ‡æ ‡æ¥å£ï¼ˆ370è¡Œï¼‰
â”‚   â”œâ”€â”€ new_strategy_interface.py  # æ–°ç­–ç•¥æ¥å£ï¼ˆ151è¡Œï¼‰
â”‚   â”œâ”€â”€ strategy.py                # ç­–ç•¥å®ç°ï¼ˆ175è¡Œï¼‰
â”‚   â””â”€â”€ trade_engine.py            # äº¤æ˜“å¼•æ“ï¼ˆ202è¡Œï¼‰
â”‚
â”œâ”€â”€ ğŸ“ config/                      # é…ç½®ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ settings.yaml              # ç³»ç»Ÿé…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“ db/                          # æ•°æ®åº“ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â””â”€â”€ t0_trading.db              # SQLiteæ•°æ®åº“
â”‚
â”œâ”€â”€ ğŸ“ indicators/                  # æŒ‡æ ‡ç›®å½•ï¼ˆç»§æ‰¿è‡ªT0ï¼‰
â”‚   â”œâ”€â”€ comprehensive_t0_strategy.py
â”‚   â”œâ”€â”€ price_ma_deviation.py
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ ğŸ“„ å¿«é€Ÿå¼€å§‹.md                   # ä¸­æ–‡å¿«é€Ÿå¼€å§‹æŒ‡å— â­
â”œâ”€â”€ ğŸ“„ è¯´æ˜æ–‡æ¡£.md                   # ä¸­æ–‡è¯¦ç»†æ–‡æ¡£ â­
â”œâ”€â”€ ğŸ“„ å®Œæ•´æ–‡æ¡£ç´¢å¼•.md               # æœ¬æ–‡ä»¶ â­
â”‚
â”œâ”€â”€ ğŸ“„ START_HERE.md                # English quick start
â”œâ”€â”€ ğŸ“„ README.md                    # English documentation
â”œâ”€â”€ ğŸ“„ INDEX.md                     # English index
â”œâ”€â”€ ğŸ“„ IMPLEMENTATION_SUMMARY.md    # å®ç°æ€»ç»“
â”œâ”€â”€ ğŸ“„ OPTIMIZATION_PLAN.md         # ä¼˜åŒ–æ–¹æ¡ˆ
â”œâ”€â”€ ğŸ“„ MIGRATION_GUIDE.md           # è¿ç§»æŒ‡å—
â”‚
â””â”€â”€ ğŸ“„ requirements.txt             # Pythonä¾èµ–
```

---

## ğŸš€ å¼€å§‹ä½¿ç”¨

**é©¬ä¸Šå¼€å§‹ï¼š**
```bash
# 1. è¿›å…¥ç›®å½•
cd e:\git_documents\Investment\Investment\T0_Optimized

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. æµ‹è¯•æ ¸å¿ƒæ¨¡å—
python core/data_manager.py
python core/indicator_loader.py
python core/config_manager.py

# 4. å¼€å§‹ä½¿ç”¨ï¼
```

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

---

*æœ€åæ›´æ–°ï¼š2025-10-26*
