# T0äº¤æ˜“ç³»ç»Ÿ - ä¼˜åŒ–ç‰ˆæœ¬

è¿™æ˜¯T0äº¤æ˜“ç³»ç»Ÿçš„**ä¼˜åŒ–ç‰ˆæœ¬**ï¼Œåœ¨æ¶æ„ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§æ–¹é¢éƒ½æœ‰æ˜¾è‘—æ”¹è¿›ã€‚

## ğŸ†• æ–°åŠŸèƒ½

### æ ¸å¿ƒæ”¹è¿›
1. **SQLiteæ•°æ®åº“** - æ¯”CSVå­˜å‚¨å¿«10-50å€
2. **æ’ä»¶åŒ–æŒ‡æ ‡ç³»ç»Ÿ** - æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç å³å¯æ·»åŠ æŒ‡æ ‡
3. **YAMLé…ç½®ç®¡ç†** - çµæ´»ä¸”æ˜“è¯»çš„é…ç½®æ–¹å¼
4. **æ¨¡å—åŒ–æ¶æ„** - æ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»

### ç›®å½•ç»“æ„

```
T0_Optimized/
â”œâ”€â”€ core/                           # æ ¸å¿ƒæ¨¡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ __init__.py                # æ¨¡å—å…¥å£
â”‚   â”œâ”€â”€ data_manager.py            # SQLiteæ•°æ®ç®¡ç†ï¼ˆ561è¡Œï¼‰
â”‚   â”œâ”€â”€ indicator_loader.py        # æ’ä»¶åŒ–æŒ‡æ ‡åŠ è½½å™¨ï¼ˆ237è¡Œï¼‰
â”‚   â””â”€â”€ config_manager.py          # é…ç½®ç®¡ç†ï¼ˆ318è¡Œï¼‰
â”‚
â”œâ”€â”€ config/                         # é…ç½®æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ settings.yaml              # ç³»ç»Ÿé…ç½®
â”‚
â”œâ”€â”€ db/                            # SQLiteæ•°æ®åº“ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â””â”€â”€ t0_trading.db              # äº¤æ˜“æ•°æ®åº“
â”‚
â”œâ”€â”€ ä¼˜åŒ–æ–¹æ¡ˆ.md                     # è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆï¼ˆ504è¡Œï¼‰
â”œâ”€â”€ å®ç°æ€»ç»“.md                     # å®ç°æ€»ç»“ï¼ˆ463è¡Œï¼‰
â”œâ”€â”€ è¯´æ˜æ–‡æ¡£.md                     # æœ¬æ–‡ä»¶
â””â”€â”€ requirements.txt               # Pythonä¾èµ–
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd T0_Optimized
pip install -r requirements.txt
```

### 2. è¿ç§»ç°æœ‰æ•°æ®ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ åœ¨åŸT0ç›®å½•ä¸­æœ‰ç°æœ‰çš„CSVæ•°æ®ï¼š

```python
from core import DataManager

# åˆ›å»ºæ•°æ®ç®¡ç†å™¨
dm = DataManager()

# ä»åŸT0ç¼“å­˜å¯¼å…¥CSVæ•°æ®
cache_dir = '../T0/cache/fenshi_data'
results = dm.batch_import_from_cache(cache_dir, stock_codes=['000333', '600030', '002415'])

print(f"å¯¼å…¥ç»“æœ: {results}")
# è¾“å‡º: {'000333': 242, '600030': 242, '002415': 242}
```

æˆ–è¿è¡Œè¿ç§»è„šæœ¬ï¼š

```bash
python core/data_manager.py
```

### 3. æµ‹è¯•æ ¸å¿ƒæ¨¡å—

**æµ‹è¯•æ•°æ®ç®¡ç†å™¨ï¼š**
```bash
python core/data_manager.py
```

**æµ‹è¯•æŒ‡æ ‡åŠ è½½å™¨ï¼š**
```bash
python core/indicator_loader.py
```

**æµ‹è¯•é…ç½®ç®¡ç†å™¨ï¼š**
```bash
python core/config_manager.py
```

## ğŸ“š ä½¿ç”¨ç¤ºä¾‹

### æ•°æ®ç®¡ç†

```python
from core import DataManager

# åˆå§‹åŒ–
dm = DataManager()

# æŸ¥è¯¢åˆ†æ—¶æ•°æ®
df = dm.get_minute_data('000333', start_date='2025-10-24')
print(f"è·å–åˆ° {len(df)} æ¡è®°å½•")

# ä¿å­˜äº¤æ˜“ä¿¡å·
signals = [{
    'stock_code': '000333',
    'datetime': '2025-10-24 10:30:00',
    'indicator_name': 'comprehensive_t0_strategy',
    'signal_type': 'BUY',
    'price': 74.85,
    'score': 85.5
}]
dm.save_signals(signals)

# å¯¼å‡ºä¸ºCSV
dm.export_to_csv('000333', 'output.csv', start_date='2025-10-24')
```

### æŒ‡æ ‡ç®¡ç†

```python
from core import IndicatorLoader

# åˆå§‹åŒ–
loader = IndicatorLoader()

# åˆ—å‡ºæ‰€æœ‰æŒ‡æ ‡
print("å¯ç”¨æŒ‡æ ‡ï¼š")
for name in loader.list_indicator_names():
    info = loader.get_indicator(name)
    print(f"  - {info['display_name']}: {info['description']}")

# æ‰§è¡ŒæŒ‡æ ‡
result = loader.execute_indicator('comprehensive_t0_strategy', df)

# è·å–UIæ˜¾ç¤ºç”¨çš„å…ƒæ•°æ®
metadata = loader.get_indicator_metadata()
```

### é…ç½®ç®¡ç†

```python
from core import ConfigManager

# åˆå§‹åŒ–
config = ConfigManager()

# è·å–é…ç½®
stocks = config.get_stocks()
theme = config.get('ui.theme')

# æ›´æ–°é…ç½®
config.set('ui.theme', 'dark')
config.save_config()

# è·å–ç‰¹å®šé…ç½®
monitor_enabled = config.is_monitor_enabled()
monitor_interval = config.get_monitor_interval()
```

## ğŸ”§ é…ç½®è¯´æ˜

ç³»ç»Ÿä½¿ç”¨å­˜å‚¨åœ¨ `config/settings.yaml` ä¸­çš„YAMLé…ç½®ã€‚é¦–æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶ã€‚

**é…ç½®ç¤ºä¾‹ï¼š**

```yaml
stocks:
  '000333': 'ç¾çš„é›†å›¢'
  '600030': 'ä¸­ä¿¡è¯åˆ¸'
  '002415': 'æµ·åº·å¨è§†'

data_source:
  primary: akshare
  fallback: dfcf
  cache_enabled: true
  cache_format: sqlite

indicators:
  comprehensive_t0_strategy:
    enabled: true
    display_name: 'ç»¼åˆT0ç­–ç•¥'
    color: '#1f77b4'

ui:
  theme: light
  window_size:
    width: 1400
    height: 900
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ“ä½œ | CSV | SQLite | æ€§èƒ½æå‡ |
|-----|-----|--------|---------|
| è¯»å–å…¨éƒ¨æ•°æ® | ~50ms | ~5ms | **10å€** |
| æ—¥æœŸèŒƒå›´æŸ¥è¯¢ | ~50ms | ~2ms | **25å€** |
| ç‰¹å®šæ—¶é—´æŸ¥è¯¢ | ~50ms | ~1ms | **50å€** |
| æ‰¹é‡æ’å…¥(100è¡Œ) | ~100ms | ~10ms | **10å€** |

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. SQLiteæ•°æ®åº“
- **å¿«é€ŸæŸ¥è¯¢**ï¼Œä½¿ç”¨ç´¢å¼•æŸ¥æ‰¾
- **äº‹åŠ¡æ”¯æŒ**ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§
- **æ•°æ®éªŒè¯**ï¼Œè‡ªåŠ¨æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
- **æ‰¹é‡æ“ä½œ**ï¼Œé«˜æ•ˆçš„æ‰¹é‡å¯¼å…¥/å¯¼å‡º

**ç¤ºä¾‹ï¼š**
```python
from core import DataManager

dm = DataManager()

# ä¿å­˜åˆ†æ—¶æ•°æ®
df = pd.read_csv('data.csv')
count = dm.save_minute_data(df, '000333')
print(f"ä¿å­˜äº† {count} æ¡è®°å½•")

# æŸ¥è¯¢æ•°æ®
df = dm.get_minute_data('000333', start_date='2025-10-24', end_date='2025-10-24')

# ä¿å­˜ä¿¡å·
signals = [...]
dm.save_signals(signals)
```

### 2. æ’ä»¶åŒ–æŒ‡æ ‡ç³»ç»Ÿ
- **è‡ªåŠ¨å‘ç°**ï¼Œæ— éœ€æ‰‹åŠ¨æ³¨å†ŒæŒ‡æ ‡
- **åŠ¨æ€åŠ è½½**ï¼Œæ”¯æŒçƒ­é‡è½½
- **å…ƒæ•°æ®æ”¯æŒ**ï¼Œä¾¿äºUIæ˜¾ç¤º
- **ç»Ÿä¸€æ¥å£**ï¼Œç®€åŒ–è°ƒç”¨

**ç¤ºä¾‹ï¼š**
```python
from core import IndicatorLoader

loader = IndicatorLoader()

# è‡ªåŠ¨å‘ç°indicators/ç›®å½•ä¸‹çš„æ‰€æœ‰æŒ‡æ ‡
indicators = loader.list_indicator_names()
print(f"æ‰¾åˆ° {len(indicators)} ä¸ªæŒ‡æ ‡")

# æ‰§è¡ŒæŒ‡æ ‡
result = loader.execute_indicator('comprehensive_t0_strategy', 
                                  stock_code='000333',
                                  trade_date='2025-10-24')
```

### 3. YAMLé…ç½®ç®¡ç†
- **æ˜“äºç¼–è¾‘**ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
- **åˆ†å±‚ç»“æ„**ï¼Œæ”¯æŒåµŒå¥—é…ç½®
- **è¿è¡Œæ—¶æ›´æ–°**ï¼ŒåŠ¨æ€ä¿®æ”¹é…ç½®
- **é»˜è®¤å€¼**ï¼Œè‡ªåŠ¨å¡«å……ç¼ºå¤±é…ç½®

**ç¤ºä¾‹ï¼š**
```python
from core import ConfigManager

config = ConfigManager()

# è·å–é…ç½®ï¼ˆæ”¯æŒç‚¹å·åˆ†éš”çš„åµŒå¥—é”®ï¼‰
theme = config.get('ui.theme')
window_width = config.get('ui.window_size.width')

# æ›´æ–°å¹¶ä¿å­˜
config.set('ui.theme', 'dark')
config.save_config()
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          UI Layer (å¾…é‡æ„)               â”‚  â† ç”¨æˆ·ç•Œé¢
â”‚     t0_data_visualizer.py               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Business Layer                  â”‚  â† ä¸šåŠ¡é€»è¾‘
â”‚  â€¢ strategy.py    â€¢ signal_detector.py  â”‚
â”‚  â€¢ backtest.py    â€¢ trade_executor.py   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Core Layer (æ–°)                â”‚  â† æ ¸å¿ƒæœåŠ¡
â”‚  â€¢ DataManager  â€¢ IndicatorLoader       â”‚
â”‚  â€¢ ConfigManager                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Data Layer                      â”‚  â† æ•°æ®è®¿é—®
â”‚  â€¢ SQLite DB    â€¢ AkShare API           â”‚
â”‚  â€¢ CSV Cache    â€¢ DFCF API              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡åŸåˆ™

1. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
2. **å¼€æ”¾å°é—­**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­
3. **ä¾èµ–å€’ç½®**ï¼šä¾èµ–æŠ½è±¡ï¼Œä¸ä¾èµ–å…·ä½“å®ç°
4. **æ¥å£éš”ç¦»**ï¼šæä¾›æœ€å°å¿…è¦æ¥å£

## ğŸ“– APIå‚è€ƒ

### DataManager API

```python
class DataManager:
    # åˆå§‹åŒ–
    __init__(db_path: str = None)
    
    # åˆ†æ—¶æ•°æ®æ“ä½œ
    save_minute_data(df: DataFrame, stock_code: str) -> int
    get_minute_data(stock_code: str, start_date: str = None, 
                    end_date: str = None) -> DataFrame
    delete_minute_data(stock_code: str, start_date: str = None,
                      end_date: str = None) -> int
    
    # ä¿¡å·æ“ä½œ
    save_signals(signals: List[Dict]) -> int
    get_signals(stock_code: str = None, indicator_name: str = None,
                start_date: str = None, end_date: str = None) -> DataFrame
    
    # CSVè¿ç§»
    import_from_csv(csv_path: str, stock_code: str) -> bool
    export_to_csv(stock_code: str, output_path: str,
                  start_date: str = None, end_date: str = None) -> bool
    batch_import_from_cache(cache_dir: str, stock_codes: List[str] = None) -> Dict
    
    # é…ç½®æ“ä½œ
    set_config(key: str, value: str, description: str = None)
    get_config(key: str, default: str = None) -> str
    
    # è¿æ¥ç®¡ç†
    close()
```

### IndicatorLoader API

```python
class IndicatorLoader:
    # åˆå§‹åŒ–
    __init__(indicators_dir: str = None)
    
    # æŒ‡æ ‡æŸ¥è¯¢
    get_indicator(indicator_name: str) -> Optional[Dict]
    get_all_indicators() -> Dict[str, Dict]
    list_indicator_names() -> List[str]
    
    # æŒ‡æ ‡æ‰§è¡Œ
    execute_indicator(indicator_name: str, *args, **kwargs) -> Any
    
    # æŒ‡æ ‡ç®¡ç†
    reload_indicator(indicator_name: str)
    get_indicator_metadata() -> List[Dict]
```

### ConfigManager API

```python
class ConfigManager:
    # åˆå§‹åŒ–
    __init__(config_file: str = None)
    
    # é…ç½®è®¿é—®
    get(key: str, default: Any = None) -> Any
    get_stocks() -> Dict[str, str]
    get_monitor_interval() -> int
    is_monitor_enabled() -> bool
    
    # é…ç½®ä¿®æ”¹
    set(key: str, value: Any)
    save_config()
    reload_config()
```

## ğŸ”„ è¿ç§»æŒ‡å—

è¯¦ç»†çš„è¿ç§»æ­¥éª¤è¯·å‚è€ƒ [è¿ç§»æŒ‡å—.md](è¿ç§»æŒ‡å—.md)

**å¿«é€Ÿè¿ç§»æ­¥éª¤ï¼š**

1. **å®‰è£…ä¾èµ–**
   ```bash
   pip install pyyaml==6.0
   ```

2. **è¿ç§»æ•°æ®**
   ```python
   from core import DataManager
   dm = DataManager()
   dm.batch_import_from_cache('../T0/cache/fenshi_data')
   ```

3. **æ›´æ–°ä»£ç **
   ```python
   # æ—§ä»£ç 
   df = pd.read_csv('cache/file.csv')
   
   # æ–°ä»£ç 
   from core import DataManager
   dm = DataManager()
   df = dm.get_minute_data('000333', start_date='2025-10-24')
   ```

## ğŸ¯ ä¸‹ä¸€æ­¥

- **äº†è§£æ›´å¤š** â†’ é˜…è¯» [ç´¢å¼•.md](ç´¢å¼•.md)
- **æŸ¥çœ‹å®ç°** â†’ é˜…è¯» [å®ç°æ€»ç»“.md](å®ç°æ€»ç»“.md)
- **ç†è§£è®¾è®¡** â†’ é˜…è¯» [ä¼˜åŒ–æ–¹æ¡ˆ.md](ä¼˜åŒ–æ–¹æ¡ˆ.md)
- **è¿ç§»æ•°æ®** â†’ é˜…è¯» [è¿ç§»æŒ‡å—.md](è¿ç§»æŒ‡å—.md)

## ğŸ“ å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆé€‰æ‹©SQLiteè€Œä¸æ˜¯Redisï¼Ÿ**
A: SQLiteæ›´è½»é‡ï¼Œæ— éœ€é¢å¤–æœåŠ¡ï¼Œæ•°æ®æŒä¹…åŒ–ï¼Œé€‚åˆå•æœºåº”ç”¨ã€‚

**Q: å¯ä»¥ç»§ç»­ä½¿ç”¨CSVå—ï¼Ÿ**
A: å¯ä»¥ã€‚ConfigManageræ”¯æŒè®¾ç½® `cache_format: csv`ï¼Œä½†å»ºè®®ä½¿ç”¨SQLiteä»¥è·å¾—æ›´å¥½æ€§èƒ½ã€‚

**Q: å¦‚ä½•æ·»åŠ æ–°æŒ‡æ ‡ï¼Ÿ**
A: åªéœ€åœ¨ `indicators/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„.pyæ–‡ä»¶ï¼Œå®šä¹‰ `analyze_xxx` å‡½æ•°å³å¯ï¼Œæ— éœ€ä¿®æ”¹å…¶ä»–ä»£ç ã€‚

**Q: æ”¯æŒå¤šè¿›ç¨‹å—ï¼Ÿ**
A: DataManagerä½¿ç”¨ `check_same_thread=False`ï¼Œæ”¯æŒå¤šçº¿ç¨‹è®¿é—®ã€‚å¤šè¿›ç¨‹éœ€è¦æ¯ä¸ªè¿›ç¨‹åˆ›å»ºç‹¬ç«‹çš„DataManagerå®ä¾‹ã€‚

---

**å¼€å§‹ä½¿ç”¨ä¼˜åŒ–ç‰ˆT0äº¤æ˜“ç³»ç»Ÿï¼Œäº«å—æ›´å¿«çš„æ€§èƒ½ï¼** ğŸš€
