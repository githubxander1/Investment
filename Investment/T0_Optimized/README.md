# T0_Optimized - ä¼˜åŒ–çš„T0äº¤æ˜“ç³»ç»Ÿ

## ğŸ“– é¡¹ç›®è¯´æ˜

è¿™æ˜¯ä¸€ä¸ª**å®Œå…¨ç‹¬ç«‹**çš„T0äº¤æ˜“ç³»ç»Ÿä¼˜åŒ–ç‰ˆæœ¬ï¼Œä¸ä¾èµ–åŸå§‹T0é¡¹ç›®ã€‚æ‰€æœ‰å¿…è¦çš„æ•°æ®å’Œèµ„æºéƒ½å·²é›†æˆåˆ°æœ¬é¡¹ç›®ä¸­ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. åˆ†å±‚æ•°æ®åº“ç»“æ„
```
db/
â”œâ”€â”€ stocks/{stock_code}/{year}/{YYYYMM}.db  # æŒ‰æœˆåˆ†åº“
â”œâ”€â”€ signals/signals.db                       # äº¤æ˜“ä¿¡å·
â”œâ”€â”€ config/system_config.db                  # ç³»ç»Ÿé…ç½®
â””â”€â”€ archive/{year}/                          # å½’æ¡£æ•°æ®
```

### 2. æ¨¡å—åŒ–æ¶æ„
- **DataManager**: ä¼ ç»Ÿå•åº“å¤šè¡¨è®¾è®¡ï¼ˆå…¼å®¹æ—§ç³»ç»Ÿï¼‰
- **DBManager**: æ–°çš„åˆ†å±‚æ•°æ®åº“ç®¡ç†å™¨ï¼ˆæ¨èï¼‰
- **IndicatorLoader**: æŒ‡æ ‡æ’ä»¶ç³»ç»Ÿ
- **ConfigManager**: YAMLé…ç½®ç®¡ç†

### 3. æœ¬åœ°æ•°æ®ç¼“å­˜
```
cache/
â””â”€â”€ fenshi_data/
    â”œâ”€â”€ 000333_20251024_fenshi.csv
    â”œâ”€â”€ 002415_20251024_fenshi.csv
    â””â”€â”€ 600030_20251024_fenshi.csv
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd T0_Optimized
pip install -r requirements.txt
```

### 2. åˆå§‹åŒ–æ•°æ®åº“

```bash
# ä½¿ç”¨DataManagerï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰
python core/data_manager.py

# ä½¿ç”¨DBManagerï¼ˆæ¨èï¼Œåˆ†å±‚ç»“æ„ï¼‰
python core/db_manager.py
```

### 3. æŸ¥çœ‹æ•°æ®

```bash
# ä½¿ç”¨Pythonè„šæœ¬æŸ¥çœ‹
python æŸ¥çœ‹æ•°æ®åº“.py

# å¿«é€ŸæŸ¥è¯¢å·¥å…·
python å¿«é€ŸæŸ¥è¯¢.py stats        # æŸ¥çœ‹ç»Ÿè®¡
python å¿«é€ŸæŸ¥è¯¢.py today 000333 # æŸ¥çœ‹ä»Šæ—¥æ•°æ®
```

## ğŸ“ ç›®å½•ç»“æ„

```
T0_Optimized/
â”œâ”€â”€ core/                      # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ data_manager.py       # æ•°æ®ç®¡ç†å™¨ï¼ˆå•åº“å¤šè¡¨ï¼‰
â”‚   â”œâ”€â”€ db_manager.py         # æ•°æ®åº“ç®¡ç†å™¨ï¼ˆåˆ†å±‚ç»“æ„ï¼‰
â”‚   â”œâ”€â”€ indicator_loader.py   # æŒ‡æ ‡åŠ è½½å™¨
â”‚   â”œâ”€â”€ config_manager.py     # é…ç½®ç®¡ç†å™¨
â”‚   â””â”€â”€ strategy.py           # ç­–ç•¥å¼•æ“
â”‚
â”œâ”€â”€ db/                        # æ•°æ®åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ stocks/               # è‚¡ç¥¨æ•°æ®ï¼ˆåˆ†å±‚å­˜å‚¨ï¼‰
â”‚   â”œâ”€â”€ signals/              # äº¤æ˜“ä¿¡å·
â”‚   â”œâ”€â”€ config/               # ç³»ç»Ÿé…ç½®
â”‚   â””â”€â”€ t0_trading.db         # ä¼ ç»Ÿæ•°æ®åº“ï¼ˆå…¼å®¹ï¼‰
â”‚
â”œâ”€â”€ cache/                     # æœ¬åœ°æ•°æ®ç¼“å­˜
â”‚   â””â”€â”€ fenshi_data/          # åˆ†æ—¶æ•°æ®CSVæ–‡ä»¶
â”‚
â”œâ”€â”€ æŸ¥çœ‹æ•°æ®åº“.py              # æ•°æ®åº“æŸ¥çœ‹å·¥å…·
â”œâ”€â”€ å¿«é€ŸæŸ¥è¯¢.py                # å¿«é€ŸæŸ¥è¯¢å·¥å…·
â”‚
â””â”€â”€ docs/                      # æ–‡æ¡£ç›®å½•
    â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md
    â”œâ”€â”€ å®Œæ•´æ–‡æ¡£ç´¢å¼•.md
    â”œâ”€â”€ æ–°æ•°æ®åº“è®¾è®¡è¯´æ˜.md
    â””â”€â”€ æ•°æ®åº“ç›®å½•è§„åˆ’è¯´æ˜.md
```

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### DataManagerï¼ˆä¼ ç»Ÿå•åº“ï¼‰

```python
from core.data_manager import DataManager

dm = DataManager()

# ä¿å­˜æ•°æ®
dm.save_minute_data(df, stock_code='000333', trade_date='2025-10-24')

# æŸ¥è¯¢æ•°æ®
df = dm.get_minute_data('000333', '2025-10-24')

dm.close()
```

### DBManagerï¼ˆæ¨èï¼Œåˆ†å±‚ç»“æ„ï¼‰

```python
from core.db_manager import DBManager

db_mgr = DBManager()

# ä¿å­˜æ•°æ®ï¼ˆè‡ªåŠ¨åˆ†å±‚ï¼‰
db_mgr.save_minute_data(df, '000333', '2025-10-24')
# â†’ ä¿å­˜åˆ°: db/stocks/000333/2025/202510.db/day_20251024

# æŸ¥è¯¢å•å¤©æ•°æ®
df = db_mgr.get_minute_data('000333', '2025-10-24')

# æŸ¥è¯¢æ•´æœˆæ•°æ®
df_month = db_mgr.get_month_data('000333', '202510')

# è·å–ç»Ÿè®¡ä¿¡æ¯
stats = db_mgr.get_database_stats()

db_mgr.close_all()
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ“ä½œ | ä¼ ç»Ÿå•è¡¨ | æ–°åˆ†å±‚ç»“æ„ | æ€§èƒ½æå‡ |
|-----|---------|-----------|---------|
| æŸ¥è¯¢å•å¤© | ~5ms | ~1.5ms | **3å€** |
| æŸ¥è¯¢æ•´æœˆ | ~50ms | ~15ms | **3å€** |
| åˆ é™¤æ•°æ® | DELETEæ…¢ | DROP/ç§»åŠ¨æ–‡ä»¶ | **10å€** |
| æ•°æ®å½’æ¡£ | å¤æ‚ | ç§»åŠ¨ç›®å½• | **å³æ—¶** |

## ğŸ“ æ–‡æ¡£èµ„æº

- [å¿«é€Ÿå¼€å§‹.md](å¿«é€Ÿå¼€å§‹.md) - 5åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
- [å®Œæ•´æ–‡æ¡£ç´¢å¼•.md](å®Œæ•´æ–‡æ¡£ç´¢å¼•.md) - æ‰€æœ‰æ¨¡å—è¯¦ç»†æ–‡æ¡£
- [æ–°æ•°æ®åº“è®¾è®¡è¯´æ˜.md](æ–°æ•°æ®åº“è®¾è®¡è¯´æ˜.md) - æŒ‰æ—¥åˆ†è¡¨è®¾è®¡
- [æ•°æ®åº“ç›®å½•è§„åˆ’è¯´æ˜.md](æ•°æ®åº“ç›®å½•è§„åˆ’è¯´æ˜.md) - åˆ†å±‚ç›®å½•è®¾è®¡
- [ä½¿ç”¨æŒ‡å—.md](ä½¿ç”¨æŒ‡å—.md) - å¸¸è§ä½¿ç”¨åœºæ™¯

## ğŸ” æ•°æ®ç®¡ç†å·¥å…·

### æŸ¥çœ‹æ•°æ®åº“
```bash
python æŸ¥çœ‹æ•°æ®åº“.py
```
æ˜¾ç¤ºæ‰€æœ‰è¡¨ã€ç»Ÿè®¡ä¿¡æ¯å’Œæ•°æ®æ ·ä¾‹ã€‚

### å¿«é€ŸæŸ¥è¯¢
```bash
# æŸ¥çœ‹ç»Ÿè®¡
python å¿«é€ŸæŸ¥è¯¢.py stats

# æŸ¥çœ‹ä»Šæ—¥æ•°æ®
python å¿«é€ŸæŸ¥è¯¢.py today 000333

# æŸ¥çœ‹æœ€è¿‘Nå¤©
python å¿«é€ŸæŸ¥è¯¢.py recent 000333 5

# å¯¼å‡ºåˆ°Excel
python å¿«é€ŸæŸ¥è¯¢.py export 000333 2025-10-24

# äº¤äº’å¼SQL
python å¿«é€ŸæŸ¥è¯¢.py sql
```

## âš™ï¸ é…ç½®ç®¡ç†

ä½¿ç”¨ConfigManagerç®¡ç†ç³»ç»Ÿé…ç½®ï¼š

```python
from core.config_manager import ConfigManager

config = ConfigManager()

# è·å–é…ç½®
stocks = config.get('monitored_stocks', [])
theme = config.get('ui_theme', 'light')

# è®¾ç½®é…ç½®
config.set('monitored_stocks', ['000333', '600030'])
config.save()
```

## ğŸ“ æ·»åŠ æ–°æ•°æ®

å°†åˆ†æ—¶æ•°æ®CSVæ–‡ä»¶æ”¾åˆ° `cache/fenshi_data/` ç›®å½•ï¼š

```
cache/fenshi_data/
â”œâ”€â”€ {stock_code}_{YYYYMMDD}_fenshi.csv
â””â”€â”€ 000333_20251025_fenshi.csv  # ç¤ºä¾‹
```

æ–‡ä»¶æ ¼å¼è¦æ±‚ï¼š
- åˆ—åï¼šæ—¶é—´, å¼€ç›˜, æ”¶ç›˜, æœ€é«˜, æœ€ä½, æˆäº¤é‡, æˆäº¤é¢
- æ—¶é—´æ ¼å¼ï¼šYYYY-MM-DD HH:MM:SS

ç„¶åè¿è¡Œå¯¼å…¥ï¼š
```bash
python core/data_manager.py
# æˆ–
python core/db_manager.py
```

## ğŸ”„ æ•°æ®è¿ç§»

å¦‚æœä½ æœ‰æ—§çš„T0é¡¹ç›®æ•°æ®ï¼Œå¯ä»¥è¿™æ ·è¿ç§»ï¼š

```bash
# 1. å¤åˆ¶CSVæ•°æ®
copy ..\T0\cache\fenshi_data\*.csv cache\fenshi_data\

# 2. è¿è¡Œå¯¼å…¥
python core/data_manager.py
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æŒ‡æ ‡

1. åœ¨ `indicators/` ç›®å½•åˆ›å»ºæ–°çš„æŒ‡æ ‡æ–‡ä»¶
2. å®ç°æŒ‡æ ‡æ¥å£ï¼ˆå‚è€ƒç°æœ‰æŒ‡æ ‡ï¼‰
3. IndicatorLoaderä¼šè‡ªåŠ¨å‘ç°å¹¶åŠ è½½

### æ‰©å±•æ•°æ®åº“

1. ä¿®æ”¹ `core/db_manager.py` æˆ– `data_manager.py`
2. æ·»åŠ æ–°çš„è¡¨ç»“æ„
3. å®ç°å¯¹åº”çš„CRUDæ–¹æ³•

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ä½¿ç”¨DBManager**ï¼šæ–°é¡¹ç›®æ¨èä½¿ç”¨åˆ†å±‚æ•°æ®åº“ç»“æ„
2. **å®šæœŸå½’æ¡£**ï¼šå°†æ—§æ•°æ®ç§»åˆ° `db/archive/` ç›®å½•
3. **æ‰¹é‡æ“ä½œ**ï¼šä½¿ç”¨ `batch_import_from_cache` æ‰¹é‡å¯¼å…¥
4. **è¿æ¥æ± **ï¼šDBManagerå†…ç½®è¿æ¥æ± ï¼Œæé«˜æ€§èƒ½

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **ç‹¬ç«‹é¡¹ç›®**ï¼šæœ¬é¡¹ç›®å®Œå…¨ç‹¬ç«‹ï¼Œä¸ä¾èµ–T0ç›®å½•
2. **æ•°æ®éš”ç¦»**ï¼šæ•°æ®å­˜å‚¨åœ¨æœ¬åœ° `db/` å’Œ `cache/` ç›®å½•
3. **å‘åå…¼å®¹**ï¼šä¿ç•™DataManagerä»¥å…¼å®¹æ—§ä»£ç 
4. **æ¨èæ–°è®¾è®¡**ï¼šæ–°å¼€å‘å»ºè®®ä½¿ç”¨DBManager

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜è¯·æŸ¥çœ‹ï¼š
1. [å®Œæ•´æ–‡æ¡£ç´¢å¼•.md](å®Œæ•´æ–‡æ¡£ç´¢å¼•.md) - FAQç« èŠ‚
2. [ä½¿ç”¨æŒ‡å—.md](ä½¿ç”¨æŒ‡å—.md) - å¸¸è§é—®é¢˜è§£å†³
3. ä»£ç æ³¨é‡Š - æ‰€æœ‰æ ¸å¿ƒæ¨¡å—éƒ½æœ‰è¯¦ç»†æ³¨é‡Š

## ğŸ“„ License

æœ¬é¡¹ç›®é‡‡ç”¨ MIT License

---

**æœ€åæ›´æ–°**: 2025-10-26

**ç‰ˆæœ¬**: v2.0 (å®Œå…¨ç‹¬ç«‹ç‰ˆæœ¬)
