# T0_Optimized ä½¿ç”¨æŒ‡å—

## ğŸ“Œ é‡è¦è¯´æ˜

### âœ… å·²å®Œæˆçš„å·¥ä½œ

1. **é»˜è®¤è¯­è¨€å·²è®¾ç½®ä¸ºä¸­æ–‡** - AIå°†é»˜è®¤ä½¿ç”¨ä¸­æ–‡å›ç­”æ‰€æœ‰é—®é¢˜
2. **æ•°æ®å¯¼å…¥è·¯å¾„å·²ä¿®å¤** - ä» `../cache/fenshi_data` æ”¹ä¸º `../T0/cache/fenshi_data`
3. **é”™è¯¯å¤„ç†å·²å¢å¼º** - æ·»åŠ äº†è¯¦ç»†çš„æ–‡ä»¶æ£€æŸ¥å’Œé”™è¯¯æç¤º

### ğŸ—‚ï¸ æ­£ç¡®çš„æ–‡ä»¶è·¯å¾„

ä» `T0_Optimized` ç›®å½•è®¿é—®åŸT0ç³»ç»Ÿçš„ç¼“å­˜æ•°æ®ï¼š

```python
# âœ… æ­£ç¡®çš„è·¯å¾„
cache_dir = '../T0/cache/fenshi_data'

# âŒ é”™è¯¯çš„è·¯å¾„
cache_dir = '../cache/fenshi_data'  # ä¼šæ‰¾ä¸åˆ°æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯¼å…¥ DataManager

```python
from core import DataManager

# åˆ›å»ºæ•°æ®ç®¡ç†å™¨ï¼ˆè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ï¼‰
dm = DataManager()
print(f"æ•°æ®åº“ä½ç½®: {dm.db_path}")
```

### 2. ä»CSVå¯¼å…¥æ•°æ®

#### æ–¹å¼Aï¼šæ‰¹é‡å¯¼å…¥ï¼ˆæ¨èï¼‰

```python
from core import DataManager

dm = DataManager()

# å¯¼å…¥æŒ‡å®šè‚¡ç¥¨
results = dm.batch_import_from_cache(
    '../T0/cache/fenshi_data',
    stock_codes=['000333', '600030', '002415']
)

print(f"å¯¼å…¥ç»“æœ: {results}")
# è¾“å‡º: {'000333': 241, '600030': 241, '002415': 241}

dm.close()
```

#### æ–¹å¼Bï¼šå¯¼å…¥å•ä¸ªæ–‡ä»¶

```python
from core import DataManager

dm = DataManager()

# å¯¼å…¥å•ä¸ªCSVæ–‡ä»¶
success = dm.import_from_csv(
    '../T0/cache/fenshi_data/000333_20251024_fenshi.csv',
    '000333'
)

if success:
    print("âœ… å¯¼å…¥æˆåŠŸ")
else:
    print("âŒ å¯¼å…¥å¤±è´¥")

dm.close()
```

### 3. æŸ¥è¯¢æ•°æ®

```python
from core import DataManager

dm = DataManager()

# æŸ¥è¯¢ç‰¹å®šæ—¥æœŸçš„æ•°æ®
df = dm.get_minute_data('000333', start_date='2025-10-24')
print(f"æŸ¥è¯¢åˆ° {len(df)} æ¡è®°å½•")
print(df.head())

# æŸ¥è¯¢æ—¥æœŸèŒƒå›´çš„æ•°æ®
df = dm.get_minute_data(
    '000333',
    start_date='2025-10-20',
    end_date='2025-10-24'
)

dm.close()
```

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1: "ç¼“å­˜ç›®å½•ä¸å­˜åœ¨"

**é”™è¯¯ä¿¡æ¯**:
```
ERROR - ç¼“å­˜ç›®å½•ä¸å­˜åœ¨: ../cache/fenshi_data
```

**è§£å†³æ–¹æ¡ˆ**:
```python
# ä½¿ç”¨æ­£ç¡®çš„è·¯å¾„
cache_dir = '../T0/cache/fenshi_data'  # âœ… æ­£ç¡®

# æˆ–è€…ä½¿ç”¨ç»å¯¹è·¯å¾„
cache_dir = r'E:\git_documents\Investment\Investment\T0\cache\fenshi_data'  # âœ… ä¹Ÿå¯ä»¥
```

### é—®é¢˜2: "CSVæ–‡ä»¶ä¸å­˜åœ¨"

**æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨**:
```python
from pathlib import Path

cache_dir = Path('../T0/cache/fenshi_data')
if cache_dir.exists():
    csv_files = list(cache_dir.glob('*.csv'))
    print(f"æ‰¾åˆ° {len(csv_files)} ä¸ªCSVæ–‡ä»¶:")
    for f in csv_files:
        print(f"  - {f.name}")
else:
    print(f"ç›®å½•ä¸å­˜åœ¨: {cache_dir.absolute()}")
```

### é—®é¢˜3: å¯¼å…¥å¤±è´¥ä½†æ— é”™è¯¯ä¿¡æ¯

**å¯ç”¨è¯¦ç»†æ—¥å¿—**:
```python
import logging

# è®¾ç½®æ—¥å¿—çº§åˆ«ä¸ºDEBUG
logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

from core import DataManager
dm = DataManager()
# ... æ‰§è¡Œæ“ä½œ
```

## ğŸ“Š å®Œæ•´ç¤ºä¾‹

### ç¤ºä¾‹1: é¦–æ¬¡æ•°æ®è¿ç§»

```python
import logging
from core import DataManager

# é…ç½®æ—¥å¿—
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)

# åˆ›å»ºæ•°æ®ç®¡ç†å™¨
dm = DataManager()
print(f"\næ•°æ®åº“è·¯å¾„: {dm.db_path}\n")

# æ‰¹é‡å¯¼å…¥CSVæ•°æ®
print("=" * 50)
print("å¼€å§‹å¯¼å…¥æ•°æ®...")
print("=" * 50)

results = dm.batch_import_from_cache(
    '../T0/cache/fenshi_data',
    stock_codes=['000333', '600030', '002415']
)

print(f"\nå¯¼å…¥ç»“æœ:")
for code, count in results.items():
    print(f"  {code}: {count} æ¡è®°å½•")

# éªŒè¯æ•°æ®
print(f"\n" + "=" * 50)
print("éªŒè¯å¯¼å…¥çš„æ•°æ®...")
print("=" * 50)

for code in ['000333', '600030', '002415']:
    df = dm.get_minute_data(code, start_date='2025-10-24')
    if not df.empty:
        print(f"\nâœ… {code}:")
        print(f"  è®°å½•æ•°: {len(df)}")
        print(f"  æ—¶é—´èŒƒå›´: {df['æ—¶é—´'].min()} åˆ° {df['æ—¶é—´'].max()}")
        print(f"  ä»·æ ¼èŒƒå›´: {df['æ”¶ç›˜'].min():.2f} - {df['æ”¶ç›˜'].max():.2f}")

dm.close()
print("\nâœ… æ‰€æœ‰æ“ä½œå®Œæˆï¼")
```

### ç¤ºä¾‹2: æ—¥å¸¸æ•°æ®æŸ¥è¯¢

```python
from core import DataManager
import pandas as pd

dm = DataManager()

# æŸ¥è¯¢ç¾çš„é›†å›¢æ˜¨å¤©çš„æ•°æ®
df = dm.get_minute_data('000333', start_date='2025-10-24')

if not df.empty:
    print(f"æŸ¥è¯¢åˆ° {len(df)} æ¡è®°å½•\n")
    
    # è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
    print("ç»Ÿè®¡ä¿¡æ¯:")
    print(f"  å¼€ç›˜ä»·: {df['å¼€ç›˜'].iloc[0]:.2f}")
    print(f"  æ”¶ç›˜ä»·: {df['æ”¶ç›˜'].iloc[-1]:.2f}")
    print(f"  æœ€é«˜ä»·: {df['æœ€é«˜'].max():.2f}")
    print(f"  æœ€ä½ä»·: {df['æœ€ä½'].min():.2f}")
    print(f"  æˆäº¤é‡: {df['æˆäº¤é‡'].sum():,}")
    print(f"  æˆäº¤é¢: {df['æˆäº¤é¢'].sum():,.0f}")
    
    # æ˜¾ç¤ºå‰5æ¡è®°å½•
    print("\nå‰5æ¡è®°å½•:")
    print(df.head().to_string())
else:
    print("æœªæŸ¥è¯¢åˆ°æ•°æ®")

dm.close()
```

### ç¤ºä¾‹3: ä¿å­˜äº¤æ˜“ä¿¡å·

```python
from core import DataManager
from datetime import datetime

dm = DataManager()

# ä¿å­˜äº¤æ˜“ä¿¡å·
signals = [
    {
        'stock_code': '000333',
        'datetime': '2025-10-24 10:30:00',
        'indicator_name': 'comprehensive_t0_strategy',
        'signal_type': 'BUY',
        'price': 74.85,
        'score': 85.5,
        'metadata': {'reason': 'çªç ´é˜»åŠ›ä½', 'confidence': 0.85}
    },
    {
        'stock_code': '000333',
        'datetime': '2025-10-24 14:15:00',
        'indicator_name': 'comprehensive_t0_strategy',
        'signal_type': 'SELL',
        'price': 75.20,
        'score': 80.0,
        'metadata': {'reason': 'è¾¾åˆ°æ­¢ç›ˆä½', 'confidence': 0.80}
    }
]

count = dm.save_signals(signals)
print(f"ä¿å­˜äº† {count} ä¸ªä¿¡å·")

# æŸ¥è¯¢ä¿¡å·
df_signals = dm.get_signals(
    stock_code='000333',
    start_date='2025-10-24'
)

print(f"\næŸ¥è¯¢åˆ° {len(df_signals)} ä¸ªä¿¡å·:")
print(df_signals[['datetime', 'signal_type', 'price', 'score']])

dm.close()
```

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **é˜…è¯»å®Œæ•´æ–‡æ¡£**: 
   - [å¿«é€Ÿå¼€å§‹.md](å¿«é€Ÿå¼€å§‹.md) - 10åˆ†é’Ÿå…¥é—¨
   - [è¯´æ˜æ–‡æ¡£.md](è¯´æ˜æ–‡æ¡£.md) - è¯¦ç»†APIæ–‡æ¡£
   - [å®Œæ•´æ–‡æ¡£ç´¢å¼•.md](å®Œæ•´æ–‡æ¡£ç´¢å¼•.md) - æœ€å…¨é¢çš„å‚è€ƒ

2. **æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½**:
   ```bash
   python core/data_manager.py
   python core/indicator_loader.py
   python core/config_manager.py
   ```

3. **å¼€å§‹ä½¿ç”¨æŒ‡æ ‡ç³»ç»Ÿ**:
   ```python
   from core import IndicatorLoader
   
   loader = IndicatorLoader()
   indicators = loader.list_indicator_names()
   print(f"å¯ç”¨æŒ‡æ ‡: {indicators}")
   ```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æ£€æŸ¥æ—¥å¿—** - å¯ç”¨è¯¦ç»†æ—¥å¿—æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
2. **éªŒè¯è·¯å¾„** - ç¡®è®¤æ–‡ä»¶å’Œç›®å½•è·¯å¾„æ­£ç¡®
3. **æŸ¥çœ‹æ–‡æ¡£** - å‚è€ƒå®Œæ•´æ–‡æ¡£ç´¢å¼•.md

---

**æœ€åæ›´æ–°**: 2025-10-26  
**ç‰ˆæœ¬**: 1.0.0
