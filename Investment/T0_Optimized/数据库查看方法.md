# æ•°æ®åº“æŸ¥çœ‹æ–¹æ³•æ€»ç»“

## ğŸ“Š å¯ç”¨çš„æŸ¥çœ‹æ–¹æ³•

### æ–¹æ³•1ï¼šPythonè„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰â­

**ä¼˜ç‚¹**: ç›´æ¥è¿è¡Œï¼Œè¾“å‡ºæ¸…æ™°ï¼Œè‡ªåŠ¨æ ¼å¼åŒ–

#### 1.1 æŸ¥çœ‹æ•´ä¸ªæ•°æ®åº“
```bash
python æŸ¥çœ‹æ•°æ®åº“.py
```

**è¾“å‡ºå†…å®¹**:
- æ‰€æœ‰è¡¨çš„è®°å½•æ•°
- æ¯ä¸ªè‚¡ç¥¨çš„ç»Ÿè®¡ä¿¡æ¯
- æœ€æ–°çš„åˆ†æ—¶æ•°æ®
- äº¤æ˜“ä¿¡å·åˆ—è¡¨
- ç³»ç»Ÿé…ç½®

#### 1.2 æŸ¥çœ‹ç‰¹å®šè‚¡ç¥¨
```bash
# æŸ¥çœ‹000333çš„æ‰€æœ‰æ•°æ®ï¼ˆæœ€æ–°50æ¡ï¼‰
python æŸ¥çœ‹æ•°æ®åº“.py 000333

# æŸ¥çœ‹000333åœ¨2025-10-24çš„æ•°æ®
python æŸ¥çœ‹æ•°æ®åº“.py 000333 2025-10-24
```

---

### æ–¹æ³•2ï¼šå¿«é€ŸæŸ¥è¯¢å·¥å…·ï¼ˆåŠŸèƒ½æœ€å¼ºï¼‰â­â­

**ä¼˜ç‚¹**: å¤šç§æŸ¥è¯¢å‘½ä»¤ï¼Œæ”¯æŒå¯¼å‡ºExcel

#### 2.1 æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
```bash
python å¿«é€ŸæŸ¥è¯¢.py stats
```

#### 2.2 æŸ¥çœ‹ä»Šå¤©çš„æ•°æ®
```bash
python å¿«é€ŸæŸ¥è¯¢.py today 000333
```

#### 2.3 æŸ¥çœ‹æœ€è¿‘å‡ å¤©
```bash
# æŸ¥çœ‹æœ€è¿‘3å¤©çš„æ•°æ®
python å¿«é€ŸæŸ¥è¯¢.py recent 000333 3
```

#### 2.4 æŸ¥çœ‹ä»·æ ¼åŒºé—´
```bash
python å¿«é€ŸæŸ¥è¯¢.py range 000333 2025-10-24
```

**è¾“å‡ºç¤ºä¾‹**:
```
è‚¡ç¥¨ä»£ç          æ—¥æœŸ   æœ€ä½ä»·  æœ€é«˜ä»·  æŒ¯å¹…   æ€»æˆäº¤é‡  æˆäº¤é¢äº¿
000333 2025-10-24 74.46 75.0 0.73 244838  18.3
```

#### 2.5 å¯¼å‡ºåˆ°Excel
```bash
# å¯¼å‡º000333çš„æ‰€æœ‰æ•°æ®
python å¿«é€ŸæŸ¥è¯¢.py export 000333

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶å
python å¿«é€ŸæŸ¥è¯¢.py export 000333 ç¾çš„é›†å›¢.xlsx
```

#### 2.6 äº¤äº’å¼SQLæŸ¥è¯¢
```bash
python å¿«é€ŸæŸ¥è¯¢.py sql
```

ç„¶åå¯ä»¥è¾“å…¥ä»»ä½•SQLæŸ¥è¯¢ï¼š
```sql
SQL> SELECT * FROM minute_data WHERE stock_code='000333' LIMIT 5
SQL> SELECT stock_code, COUNT(*) FROM minute_data GROUP BY stock_code
SQL> exit
```

---

### æ–¹æ³•3ï¼šVS Codeæ‰©å±•ï¼ˆå¯è§†åŒ–ï¼‰â­â­â­

**ä¼˜ç‚¹**: å›¾å½¢åŒ–ç•Œé¢ï¼Œç›´è§‚æ–¹ä¾¿

#### å®‰è£…æ­¥éª¤:
1. æ‰“å¼€VS Code
2. æŒ‰ `Ctrl+Shift+X` æ‰“å¼€æ‰©å±•å¸‚åœº
3. æœç´¢ "SQLite Viewer" æˆ– "SQLite"
4. å®‰è£…æ‰©å±•

#### ä½¿ç”¨æ–¹æ³•:
1. åœ¨æ–‡ä»¶æµè§ˆå™¨ä¸­æ‰¾åˆ° `db/t0_trading.db`
2. å³é”®ç‚¹å‡»æ–‡ä»¶
3. é€‰æ‹© "Open Database" æˆ– "Open with SQLite Viewer"
4. å¯ä»¥:
   - æµè§ˆæ‰€æœ‰è¡¨
   - æŸ¥çœ‹æ•°æ®
   - æ‰§è¡ŒSQLæŸ¥è¯¢
   - å¯¼å‡ºæ•°æ®

---

### æ–¹æ³•4ï¼šDB Browser for SQLiteï¼ˆä¸“ä¸šå·¥å…·ï¼‰â­â­â­

**ä¼˜ç‚¹**: åŠŸèƒ½æœ€å…¨ï¼Œæ”¯æŒç¼–è¾‘ã€å¯¼å…¥å¯¼å‡ºã€æ‰§è¡Œå¤æ‚SQL

#### ä¸‹è½½å®‰è£…:
1. è®¿é—®: https://sqlitebrowser.org/
2. ä¸‹è½½Windowsç‰ˆæœ¬
3. å®‰è£…å¹¶æ‰“å¼€

#### ä½¿ç”¨æ–¹æ³•:
1. File â†’ Open Database
2. é€‰æ‹© `E:\git_documents\Investment\Investment\T0_Optimized\db\t0_trading.db`
3. åŠŸèƒ½:
   - **Browse Data**: æµè§ˆè¡¨æ•°æ®
   - **Edit Pragmas**: æŸ¥çœ‹æ•°æ®åº“è®¾ç½®
   - **Execute SQL**: æ‰§è¡ŒSQLæŸ¥è¯¢
   - **DB Schema**: æŸ¥çœ‹è¡¨ç»“æ„
   - **Export**: å¯¼å‡ºä¸ºCSV/SQLç­‰æ ¼å¼

---

### æ–¹æ³•5ï¼šPythonä»£ç æŸ¥è¯¢ï¼ˆè‡ªå®šä¹‰ï¼‰

å¦‚æœä½ æƒ³åœ¨è‡ªå·±çš„ä»£ç ä¸­æŸ¥è¯¢ï¼š

```python
from core import DataManager

dm = DataManager()

# æŸ¥è¯¢æ•°æ®
df = dm.get_minute_data('000333', start_date='2025-10-24')
print(df)

# æŸ¥è¯¢ä¿¡å·
signals = dm.get_signals(stock_code='000333')
print(signals)

dm.close()
```

---

## ğŸ¯ æ¨èä½¿ç”¨åœºæ™¯

| åœºæ™¯ | æ¨èæ–¹æ³• | å‘½ä»¤ |
|-----|---------|------|
| å¿«é€ŸæŸ¥çœ‹æ•´ä½“æƒ…å†µ | æŸ¥çœ‹æ•°æ®åº“.py | `python æŸ¥çœ‹æ•°æ®åº“.py` |
| æŸ¥çœ‹ç‰¹å®šè‚¡ç¥¨ç»Ÿè®¡ | å¿«é€ŸæŸ¥è¯¢.py | `python å¿«é€ŸæŸ¥è¯¢.py range 000333 2025-10-24` |
| å¯¼å‡ºæ•°æ®åˆ†æ | å¿«é€ŸæŸ¥è¯¢.py | `python å¿«é€ŸæŸ¥è¯¢.py export 000333` |
| æ‰§è¡Œå¤æ‚SQL | å¿«é€ŸæŸ¥è¯¢.py | `python å¿«é€ŸæŸ¥è¯¢.py sql` |
| å¯è§†åŒ–æµè§ˆç¼–è¾‘ | DB Browser | å›¾å½¢ç•Œé¢æ“ä½œ |
| åœ¨VS Codeä¸­æŸ¥çœ‹ | SQLite Viewer | å³é”®æ‰“å¼€æ•°æ®åº“ |
| åœ¨ä»£ç ä¸­ä½¿ç”¨ | DataManager | `dm.get_minute_data()` |

---

## ğŸ“ å¸¸ç”¨SQLæŸ¥è¯¢ç¤ºä¾‹

### æŸ¥è¯¢æ€»è®°å½•æ•°
```sql
SELECT COUNT(*) FROM minute_data;
```

### æŸ¥è¯¢æ¯ä¸ªè‚¡ç¥¨çš„è®°å½•æ•°
```sql
SELECT stock_code, COUNT(*) as count 
FROM minute_data 
GROUP BY stock_code;
```

### æŸ¥è¯¢ç‰¹å®šè‚¡ç¥¨çš„ä»·æ ¼èŒƒå›´
```sql
SELECT 
    stock_code,
    MIN(low) as æœ€ä½ä»·,
    MAX(high) as æœ€é«˜ä»·,
    AVG(close) as å¹³å‡ä»·
FROM minute_data 
WHERE stock_code = '000333'
  AND datetime LIKE '2025-10-24%';
```

### æŸ¥è¯¢æˆäº¤é‡æœ€å¤§çš„10æ¡è®°å½•
```sql
SELECT datetime, stock_code, volume, close
FROM minute_data
ORDER BY volume DESC
LIMIT 10;
```

### æŸ¥è¯¢ç‰¹å®šæ—¶é—´æ®µ
```sql
SELECT *
FROM minute_data
WHERE stock_code = '000333'
  AND datetime BETWEEN '2025-10-24 09:30:00' AND '2025-10-24 10:30:00'
ORDER BY datetime;
```

---

## ğŸ” æ•°æ®åº“ç»“æ„å‚è€ƒ

### minute_data è¡¨
| åˆ—å | ç±»å‹ | è¯´æ˜ |
|-----|------|------|
| stock_code | TEXT | è‚¡ç¥¨ä»£ç  |
| datetime | TEXT | æ—¶é—´ |
| open | REAL | å¼€ç›˜ä»· |
| close | REAL | æ”¶ç›˜ä»· |
| high | REAL | æœ€é«˜ä»· |
| low | REAL | æœ€ä½ä»· |
| volume | INTEGER | æˆäº¤é‡ |
| amount | REAL | æˆäº¤é¢ |
| avg_price | REAL | å‡ä»· |
| change_pct | REAL | æ¶¨è·Œå¹… |

### trading_signals è¡¨
| åˆ—å | ç±»å‹ | è¯´æ˜ |
|-----|------|------|
| stock_code | TEXT | è‚¡ç¥¨ä»£ç  |
| datetime | TEXT | æ—¶é—´ |
| indicator_name | TEXT | æŒ‡æ ‡åç§° |
| signal_type | TEXT | ä¿¡å·ç±»å‹ï¼ˆBUY/SELLï¼‰ |
| price | REAL | ä»·æ ¼ |
| score | REAL | è¯„åˆ† |
| metadata | TEXT | å…ƒæ•°æ®ï¼ˆJSONï¼‰ |

---

## ğŸ’¡ å°æŠ€å·§

### 1. å¿«é€ŸæŸ¥çœ‹æ•°æ®åº“å¤§å°
```bash
# Windows
cd db
dir t0_trading.db

# è¾“å‡ºæ–‡ä»¶å¤§å°çº¦208 KB (åŒ…å«723æ¡è®°å½•)
```

### 2. å¤‡ä»½æ•°æ®åº“
```bash
# å¤åˆ¶æ•´ä¸ªdbæ–‡ä»¶å³å¯
copy db\t0_trading.db db\t0_trading_backup_20251026.db
```

### 3. å®šæœŸæ¸…ç†æ—§æ•°æ®
```python
from core import DataManager

dm = DataManager()
# åˆ é™¤30å¤©å‰çš„æ•°æ®
dm.delete_minute_data('000333', end_date='2025-09-24')
dm.close()
```

### 4. æ€§èƒ½ä¼˜åŒ–
æ•°æ®åº“å·²ç»è‡ªåŠ¨åˆ›å»ºäº†ç´¢å¼•ï¼š
- `idx_stock_datetime` - åœ¨ (stock_code, datetime) ä¸Š
- `idx_datetime` - åœ¨ datetime ä¸Š
- `idx_signal_stock_datetime` - åœ¨ä¿¡å·è¡¨ä¸Š

æŸ¥è¯¢æ—¶ä½¿ç”¨è¿™äº›å­—æ®µä¼šéå¸¸å¿«ï¼

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

- **å®Œæ•´æ–‡æ¡£**: [å®Œæ•´æ–‡æ¡£ç´¢å¼•.md](å®Œæ•´æ–‡æ¡£ç´¢å¼•.md)
- **ä½¿ç”¨æŒ‡å—**: [ä½¿ç”¨æŒ‡å—.md](ä½¿ç”¨æŒ‡å—.md)
- **å¿«é€Ÿå¼€å§‹**: [å¿«é€Ÿå¼€å§‹.md](å¿«é€Ÿå¼€å§‹.md)

---

**æœ€åæ›´æ–°**: 2025-10-26
