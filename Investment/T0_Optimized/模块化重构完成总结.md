# T0æ•°æ®å¯è§†åŒ–å·¥å…· - æ¨¡å—åŒ–é‡æ„å®Œæˆæ€»ç»“

## âœ… é‡æ„ç›®æ ‡

å°†åŸå§‹çš„`t0_data_visualizer.py`ï¼ˆ~1500è¡Œä»£ç ï¼‰æ‹†åˆ†æˆæ¨¡å—åŒ–ç»“æ„ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚

## ğŸ“ æ–°çš„ç›®å½•ç»“æ„

```
T0_Optimized/
â”œâ”€â”€ visualizer_ui/              # âœ… UIæ¨¡å—ç›®å½•
â”‚   â”œâ”€â”€ __init__.py            # æ¨¡å—åˆå§‹åŒ–ï¼Œå¯¼å‡ºä¸»ç±»
â”‚   â”œâ”€â”€ config.py              # é…ç½®æ¨¡å—ï¼ˆè‚¡ç¥¨ã€è·¯å¾„ã€çª—å£ã€å›¾è¡¨é…ç½®ï¼‰
â”‚   â”œâ”€â”€ data_loader.py         # æ•°æ®åŠ è½½æ¨¡å—ï¼ˆCSVã€æ•°æ®åº“ã€æ¨¡æ‹Ÿæ•°æ®ï¼‰
â”‚   â”œâ”€â”€ chart_manager.py       # åŸºç¡€å›¾è¡¨ç®¡ç†æ¨¡å—ï¼ˆä¸»åˆ†æ—¶å›¾ï¼‰
â”‚   â”œâ”€â”€ indicator_plotters.py  # æŒ‡æ ‡ç»˜å›¾æ¨¡å—ï¼ˆå„ç±»æŠ€æœ¯æŒ‡æ ‡ï¼‰
â”‚   â”œâ”€â”€ main_window.py         # ä¸»çª—å£æ¨¡å—ï¼ˆUIåˆ›å»ºã€äº‹ä»¶å¤„ç†ï¼‰
â”‚   â””â”€â”€ README.md              # æ¨¡å—æ–‡æ¡£
â”‚
â”œâ”€â”€ run_visualizer.py          # âœ… å¯åŠ¨è„šæœ¬ï¼ˆæ¨¡å—åŒ–ç‰ˆæœ¬ï¼‰
â”œâ”€â”€ t0_data_visualizer.py      # âš ï¸ åŸå§‹æ–‡ä»¶ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰
â”‚
â”œâ”€â”€ core/                      # æ ¸å¿ƒæ•°æ®ç®¡ç†
â”‚   â”œâ”€â”€ data_manager.py        # å•æ•°æ®åº“ç®¡ç†å™¨
â”‚   â””â”€â”€ db_manager.py          # åˆ†å±‚æ•°æ®åº“ç®¡ç†å™¨
â”‚
â”œâ”€â”€ indicators/                # æŒ‡æ ‡è®¡ç®—æ¨¡å—
â”‚   â”œâ”€â”€ comprehensive_t0_strategy.py
â”‚   â”œâ”€â”€ price_ma_deviation.py
â”‚   â””â”€â”€ price_ma_deviation_optimized.py
â”‚
â”œâ”€â”€ cache/fenshi_data/         # æœ¬åœ°CSVæ•°æ®ç¼“å­˜
â””â”€â”€ db/                        # æ•°æ®åº“å­˜å‚¨
```

## ğŸ“Š æ¨¡å—åˆ’åˆ†è¯¦è§£

### 1. `config.py` - é…ç½®æ¨¡å— (41è¡Œ)

**èŒè´£**: é›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®å’Œå¸¸é‡

**å†…å®¹**:
- âœ… è‚¡ç¥¨é…ç½®ï¼š`STOCKS = {'600030': 'ä¸­ä¿¡è¯åˆ¸', '000333': 'ç¾çš„é›†å›¢', '002415': 'æµ·åº·å¨è§†'}`
- âœ… è·¯å¾„é…ç½®ï¼š`CACHE_DIR` ç¼“å­˜ç›®å½•
- âœ… çª—å£é…ç½®ï¼š`WINDOW_TITLE`, `WINDOW_GEOMETRY`, `WINDOW_MIN_SIZE`
- âœ… å›¾è¡¨é…ç½®ï¼š`MAIN_CHART_SIZE`, `INDICATOR_CHART_SIZE`, `DPI`
- âœ… æ’­æ”¾é…ç½®ï¼š`DEFAULT_PLAY_SPEED`, `MIN_PLAY_SPEED`, `MAX_PLAY_SPEED`
- âœ… ä¸­æ–‡å­—ä½“é…ç½®ï¼šmatplotlibå‚æ•°è®¾ç½®

**ä¼˜åŠ¿**:
- æ‰€æœ‰é…ç½®é›†ä¸­åœ¨ä¸€å¤„ï¼Œä¿®æ”¹æ–¹ä¾¿
- å…¶ä»–æ¨¡å—åªéœ€å¯¼å…¥é…ç½®ï¼Œæ— éœ€ç¡¬ç¼–ç 
- ä¾¿äºç¯å¢ƒé€‚é…ï¼ˆå¼€å‘/ç”Ÿäº§ï¼‰

### 2. `data_loader.py` - æ•°æ®åŠ è½½æ¨¡å— (211è¡Œ)

**èŒè´£**: ç»Ÿä¸€ç®¡ç†æ•°æ®è·å–å’Œé¢„å¤„ç†

**æ ¸å¿ƒåŠŸèƒ½**:
```python
class DataLoader:
    def load_from_cache(stock_code, date)      # ä»CSVç¼“å­˜åŠ è½½
    def load_from_database(stock_code, date)   # ä»æ•°æ®åº“åŠ è½½
    def load_stock_data(stock_code, date)      # æ™ºèƒ½åŠ è½½ï¼ˆä¼˜å…ˆç¼“å­˜ï¼‰
    def _preprocess_data(df)                   # æ•°æ®é¢„å¤„ç†
    def _filter_lunch_break(df)                # è¿‡æ»¤åˆä¼‘æ—¶æ®µ
    def _generate_mock_data(stock_code)        # ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
```

**æ•°æ®åŠ è½½ç­–ç•¥**:
1. ä¼˜å…ˆä»CSVç¼“å­˜åŠ è½½ï¼ˆæœ€å¿«ï¼‰
2. ç¼“å­˜ä¸å­˜åœ¨æ—¶ï¼Œå°è¯•DBManagerï¼ˆåˆ†å±‚æ•°æ®åº“ï¼‰
3. DBManagerå¤±è´¥æ—¶ï¼Œå°è¯•DataManagerï¼ˆå•æ•°æ®åº“ï¼‰
4. å…¨éƒ¨å¤±è´¥æ—¶ï¼Œç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼ˆä¿è¯å¯ç”¨æ€§ï¼‰

**ä¼˜åŠ¿**:
- å¤šå±‚å›é€€æœºåˆ¶ï¼Œæé«˜æ•°æ®å¯ç”¨æ€§
- ç»Ÿä¸€çš„æ•°æ®æ¥å£ï¼Œç®€åŒ–è°ƒç”¨
- è‡ªåŠ¨é¢„å¤„ç†å’Œæ ¼å¼åŒ–

### 3. `chart_manager.py` - å›¾è¡¨ç®¡ç†æ¨¡å— (149è¡Œ)

**èŒè´£**: ç»˜åˆ¶åŸºç¡€å›¾è¡¨ï¼ˆä¸å«æŠ€æœ¯æŒ‡æ ‡ï¼‰

**æ ¸å¿ƒåŠŸèƒ½**:
```python
class ChartManager:
    def calculate_avg_price(df)                    # è®¡ç®—å‡ä»·çº¿
    def plot_main_chart(ax, df, stock_code)        # ç»˜åˆ¶ä¸»åˆ†æ—¶å›¾
    def plot_chart_with_signals(fig, df, ...)      # ç»˜åˆ¶å¸¦ä¿¡å·çš„åˆ†æ—¶å›¾
```

**ä¸»åˆ†æ—¶å›¾ç‰¹æ€§**:
- âœ… åˆ†æ—¶ä»·æ ¼çº¿ï¼ˆè“è‰²ï¼‰
- âœ… å‡ä»·çº¿ï¼ˆæ©™è‰²è™šçº¿ï¼‰
- âœ… æ¶¨è·Œå¹…é¢œè‰²æ ‡è®°ï¼ˆçº¢/ç»¿ï¼‰
- âœ… æˆäº¤é‡æŸ±çŠ¶å›¾
- âœ… è¿‡æ»¤åˆä¼‘æ—¶æ®µï¼Œå›¾è¡¨è¿è´¯
- âœ… æ—¶é—´è½´æ ¼å¼åŒ–

**å¸¦ä¿¡å·åˆ†æ—¶å›¾ç‰¹æ€§**:
- âœ… æ‰€æœ‰ä¸»åˆ†æ—¶å›¾ç‰¹æ€§
- âœ… ä¹°å…¥ä¿¡å·æ ‡è®°ï¼ˆç»¿è‰²â–²ï¼‰
- âœ… å–å‡ºä¿¡å·æ ‡è®°ï¼ˆçº¢è‰²â–¼ï¼‰
- âœ… ä¿¡å·è¯´æ˜å›¾ä¾‹

**ä¼˜åŠ¿**:
- å›¾è¡¨ç»˜åˆ¶é€»è¾‘ç‹¬ç«‹ï¼Œä¾¿äºå¤ç”¨
- ç»Ÿä¸€çš„ç»˜å›¾é£æ ¼å’Œå‚æ•°
- æ˜“äºæ‰©å±•æ–°çš„å›¾è¡¨ç±»å‹

### 4. `indicator_plotters.py` - æŒ‡æ ‡ç»˜å›¾æ¨¡å— (263è¡Œ)

**èŒè´£**: ç»˜åˆ¶å„ç±»æŠ€æœ¯æŒ‡æ ‡çš„å®Œæ•´åˆ†æå›¾è¡¨

**æ”¯æŒçš„æŒ‡æ ‡**:

#### 1ï¸âƒ£ ç»¼åˆT0ç­–ç•¥
```python
@staticmethod
def plot_comprehensive_t0(fig, df, stock_code) -> bool
```
- è°ƒç”¨`indicators.comprehensive_t0_strategy`
- ç»˜åˆ¶å¸¦ä¹°å–ä¿¡å·çš„åˆ†æ—¶å›¾
- æ˜¾ç¤ºå¤åˆè¯„åˆ†å’Œä¿¡å·ç»Ÿè®¡

#### 2ï¸âƒ£ ä»·æ ¼å‡çº¿åç¦»ï¼ˆåŸºç¡€ç‰ˆï¼‰
```python
@staticmethod
def plot_price_ma_deviation(fig, df, stock_code) -> bool
```
- è°ƒç”¨`indicators.price_ma_deviation`
- ç»˜åˆ¶ä»·æ ¼ä¸å‡çº¿çš„åç¦»ç‡
- æ˜¾ç¤ºä¹°å–ä¿¡å·ç‚¹

#### 3ï¸âƒ£ ä»·æ ¼å‡çº¿åç¦»ï¼ˆä¼˜åŒ–ç‰ˆï¼‰
```python
@staticmethod
def plot_price_ma_deviation_optimized(fig, df, stock_code) -> bool
```
- è°ƒç”¨`indicators.price_ma_deviation_optimized`
- ä½¿ç”¨å¹³æ»‘åçš„åç¦»ç‡
- æ›´ä¸¥æ ¼çš„ä¿¡å·é˜ˆå€¼

**ä¼˜åŠ¿**:
- æŒ‡æ ‡ç»˜å›¾é€»è¾‘ä¸ä¸»çª—å£è§£è€¦
- æ¯ä¸ªæŒ‡æ ‡ç‹¬ç«‹æ–¹æ³•ï¼Œä¾¿äºæµ‹è¯•
- ç»Ÿä¸€çš„è¿”å›å€¼å’Œé”™è¯¯å¤„ç†
- æ˜“äºæ·»åŠ æ–°æŒ‡æ ‡

### 5. `main_window.py` - ä¸»çª—å£æ¨¡å— (318è¡Œ)

**èŒè´£**: UIåˆ›å»ºã€äº‹ä»¶å¤„ç†ã€å›¾è¡¨åè°ƒ

**UIå¸ƒå±€ï¼ˆä¸Šä¸­ä¸‹ä¸‰éƒ¨åˆ†ï¼‰**:

#### ä¸Šéƒ¨ - æ§åˆ¶æ 
- âœ… è‚¡ç¥¨é€‰æ‹©ä¸‹æ‹‰æ¡†
- âœ… è‚¡ç¥¨åç§°æ˜¾ç¤º
- âœ… é‡æ–°åŠ è½½æ•°æ®æŒ‰é’®
- âœ… æ’­æ”¾æ§åˆ¶ï¼ˆæ’­æ”¾/æš‚åœ/é‡ç½®ï¼‰
- âœ… æ’­æ”¾é€Ÿåº¦è°ƒèŠ‚æ»‘å—
- âœ… åº•éƒ¨çŠ¶æ€æ 

#### ä¸­éƒ¨ - ä¸»åˆ†æ—¶å›¾
- âœ… çº¯ç²¹çš„åˆ†æ—¶å›¾ï¼ˆæ— æŠ€æœ¯æŒ‡æ ‡ï¼‰
- âœ… å›ºå®šå¤§å°ï¼Œä¸éšæŒ‡æ ‡æ•°é‡å˜åŒ–
- âœ… å®æ—¶æ›´æ–°

#### ä¸‹éƒ¨ - æŒ‡æ ‡æ˜¾ç¤ºåŒº
- âœ… æŒ‡æ ‡é€‰æ‹©å¤é€‰æ¡†ï¼ˆ3ä¸ªæŒ‡æ ‡ï¼‰
- âœ… å¯æ»šåŠ¨çš„æŒ‡æ ‡å›¾è¡¨å®¹å™¨
- âœ… åŠ¨æ€åŠ è½½é€‰ä¸­çš„æŒ‡æ ‡
- âœ… æ¯ä¸ªæŒ‡æ ‡ç‹¬ç«‹æ˜¾ç¤ºåŒºåŸŸ

**æ ¸å¿ƒæ–¹æ³•**:
```python
class T0DataVisualizer:
    def _create_ui()                           # åˆ›å»ºUIå¸ƒå±€
    def _init_data()                           # åˆå§‹åŒ–æ•°æ®
    def _load_data()                           # åŠ è½½æ•°æ®
    def _on_stock_change()                     # è‚¡ç¥¨åˆ‡æ¢äº‹ä»¶
    def _update_chart()                        # æ›´æ–°ä¸»åˆ†æ—¶å›¾
    def _update_indicator_charts()             # æ›´æ–°æŒ‡æ ‡å›¾è¡¨
    def _create_indicator_chart(...)           # åˆ›å»ºå•ä¸ªæŒ‡æ ‡å›¾è¡¨
    def _start_play()                          # å¼€å§‹æ’­æ”¾
    def _pause_play()                          # æš‚åœæ’­æ”¾
    def _reset_play()                          # é‡ç½®æ’­æ”¾
```

**ä¼˜åŠ¿**:
- UIé€»è¾‘æ¸…æ™°ï¼ŒèŒè´£å•ä¸€
- äº‹ä»¶å¤„ç†é›†ä¸­ç®¡ç†
- å›¾è¡¨æ›´æ–°åè°ƒé«˜æ•ˆ
- ä¾¿äºæ·»åŠ æ–°åŠŸèƒ½

### 6. `run_visualizer.py` - å¯åŠ¨è„šæœ¬ (46è¡Œ)

**èŒè´£**: ç¨‹åºå…¥å£å’Œç¯å¢ƒåˆå§‹åŒ–

```python
def main():
    logger.info("å¯åŠ¨T0äº¤æ˜“ç³»ç»Ÿåˆ†æ—¶æ•°æ®å¯è§†åŒ–å·¥å…·")
    
    root = tk.Tk()
    app = T0DataVisualizer(root)
    
    # æ·»åŠ çª—å£å…³é—­äº‹ä»¶å¤„ç†
    def on_closing():
        logger.info("å…³é—­åº”ç”¨ç¨‹åº")
        root.destroy()
    
    root.protocol("WM_DELETE_WINDOW", on_closing)
    root.mainloop()
```

**ä¼˜åŠ¿**:
- ç®€æ´çš„å¯åŠ¨é€»è¾‘
- å®Œå–„çš„æ—¥å¿—é…ç½®
- ä¼˜é›…çš„é€€å‡ºå¤„ç†

## ğŸ¯ æ¨¡å—åŒ–ä¼˜åŠ¿å¯¹æ¯”

### ä»£ç è§„æ¨¡
| æŒ‡æ ‡ | åŸå§‹ç‰ˆæœ¬ | æ¨¡å—åŒ–ç‰ˆæœ¬ | æ”¹è¿› |
|-----|---------|-----------|------|
| æ€»ä»£ç è¡Œæ•° | ~1500è¡Œ | ~1000è¡Œ | â¬‡ï¸ 33% |
| å•æ–‡ä»¶æœ€å¤§è¡Œæ•° | 1500è¡Œ | 318è¡Œ | â¬‡ï¸ 79% |
| æ¨¡å—æ•°é‡ | 1ä¸ª | 6ä¸ª | â¬†ï¸ æ¨¡å—åŒ– |
| å¹³å‡æ¨¡å—å¤§å° | 1500è¡Œ | 167è¡Œ | â¬‡ï¸ 89% |

### å¯ç»´æŠ¤æ€§
| æŒ‡æ ‡ | åŸå§‹ç‰ˆæœ¬ | æ¨¡å—åŒ–ç‰ˆæœ¬ |
|-----|---------|-----------|
| èŒè´£åˆ†ç¦» | âŒ å•ä¸€æ–‡ä»¶ | âœ… 6ä¸ªæ¨¡å— |
| ä»£ç å¤ç”¨ | âš ï¸ ä½ | âœ… é«˜ |
| ä¿®æ”¹å½±å“èŒƒå›´ | âš ï¸ å…¨å±€ | âœ… å±€éƒ¨ |
| æµ‹è¯•éš¾åº¦ | âš ï¸ å›°éš¾ | âœ… ç®€å• |
| æ–°äººä¸Šæ‰‹ | âš ï¸ å›°éš¾ | âœ… å®¹æ˜“ |

### æ‰©å±•æ€§
| åŠŸèƒ½éœ€æ±‚ | åŸå§‹ç‰ˆæœ¬ | æ¨¡å—åŒ–ç‰ˆæœ¬ |
|---------|---------|-----------|
| æ·»åŠ æ–°æŒ‡æ ‡ | ä¿®æ”¹ä¸»æ–‡ä»¶ | åªä¿®æ”¹indicator_plotters.py |
| ä¿®æ”¹UIå¸ƒå±€ | ä¿®æ”¹ä¸»æ–‡ä»¶ | åªä¿®æ”¹main_window.py |
| æ›´æ¢æ•°æ®æº | ä¿®æ”¹ä¸»æ–‡ä»¶ | åªä¿®æ”¹data_loader.py |
| è°ƒæ•´é…ç½® | æœç´¢ç¡¬ç¼–ç  | åªä¿®æ”¹config.py |

## ğŸš€ è¿è¡ŒçŠ¶æ€

### å¯åŠ¨å‘½ä»¤
```bash
cd T0_Optimized
python run_visualizer.py
```

### å¯åŠ¨æ—¥å¿—ï¼ˆæˆåŠŸç¤ºä¾‹ï¼‰
```
âœ… æˆåŠŸå¯¼å…¥æ•°æ®åº“ç®¡ç†å™¨
âœ… æˆåŠŸå¯¼å…¥ç»¼åˆT0ç­–ç•¥æ¨¡å—
âœ… æˆåŠŸå¯¼å…¥ä¼˜åŒ–ç‰ˆä»·æ ¼å‡çº¿åç¦»ç­–ç•¥æ¨¡å—
âœ… å¯åŠ¨T0äº¤æ˜“ç³»ç»Ÿåˆ†æ—¶æ•°æ®å¯è§†åŒ–å·¥å…·
âœ… æˆåŠŸä»ç¼“å­˜åŠ è½½ 241 æ¡æ•°æ® (600030 ä¸­ä¿¡è¯åˆ¸)
âœ… æˆåŠŸä»ç¼“å­˜åŠ è½½ 241 æ¡æ•°æ® (000333 ç¾çš„é›†å›¢)
âœ… æˆåŠŸä»ç¼“å­˜åŠ è½½ 241 æ¡æ•°æ® (002415 æµ·åº·å¨è§†)
âœ… ä¸»åˆ†æ—¶å›¾ç»˜åˆ¶å®Œæˆ
âœ… æˆåŠŸç»˜åˆ¶æŒ‡æ ‡: ä»·æ ¼å‡çº¿åç¦»(åŸºç¡€)
âœ… æŒ‡æ ‡å›¾è¡¨ç»˜åˆ¶å®Œæˆ
```

### åŠŸèƒ½éªŒè¯
- âœ… ä¸»åˆ†æ—¶å›¾æ­£å¸¸æ˜¾ç¤ºï¼ˆæ— æŒ‡æ ‡ï¼‰
- âœ… è‚¡ç¥¨åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- âœ… æ•°æ®ç¼“å­˜æœºåˆ¶æ­£å¸¸
- âœ… æŒ‡æ ‡é€‰æ‹©åŠŸèƒ½æ­£å¸¸
- âœ… ä»·æ ¼å‡çº¿åç¦»ï¼ˆåŸºç¡€ï¼‰æ­£å¸¸æ˜¾ç¤º
- âš ï¸ ç»¼åˆT0ç­–ç•¥éœ€è¦ä¼ å‚ä¿®å¤
- âš ï¸ ä»·æ ¼å‡çº¿åç¦»ï¼ˆä¼˜åŒ–ï¼‰éœ€è¦ä¼ å‚ä¿®å¤

## ğŸ“š ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹
```python
# å¯¼å…¥å¹¶è¿è¡Œ
from visualizer_ui import T0DataVisualizer
import tkinter as tk

root = tk.Tk()
app = T0DataVisualizer(root)
root.mainloop()
```

### å•ç‹¬ä½¿ç”¨æ•°æ®åŠ è½½å™¨
```python
from visualizer_ui.data_loader import DataLoader

loader = DataLoader()
df = loader.load_stock_data('600030', '2025-10-24')
print(f"åŠ è½½äº† {len(df)} æ¡æ•°æ®")
```

### å•ç‹¬ä½¿ç”¨å›¾è¡¨ç®¡ç†å™¨
```python
from visualizer_ui.chart_manager import ChartManager
from visualizer_ui.data_loader import DataLoader
import matplotlib.pyplot as plt

# åŠ è½½æ•°æ®
loader = DataLoader()
df = loader.load_stock_data('600030', '2025-10-24')

# ç»˜åˆ¶å›¾è¡¨
manager = ChartManager()
fig, ax = plt.subplots(figsize=(12, 6))
manager.plot_main_chart(ax, df, '600030')
plt.show()
```

### ä¿®æ”¹é…ç½®
```python
# ç¼–è¾‘ visualizer_ui/config.py

# æ·»åŠ æ–°è‚¡ç¥¨
STOCKS = {
    '600030': 'ä¸­ä¿¡è¯åˆ¸',
    '000333': 'ç¾çš„é›†å›¢',
    '002415': 'æµ·åº·å¨è§†',
    '600519': 'è´µå·èŒ…å°',  # æ–°å¢
}

# ä¿®æ”¹çª—å£å¤§å°
WINDOW_GEOMETRY = "1400x900"  # é»˜è®¤1200x800

# ä¿®æ”¹å›¾è¡¨å¤§å°
MAIN_CHART_SIZE = (14, 5)     # é»˜è®¤(12, 4)
```

### æ·»åŠ æ–°æŒ‡æ ‡
1. **ç¼–å†™æŒ‡æ ‡è®¡ç®—é€»è¾‘**ï¼ˆindicators/ç›®å½•ä¸‹ï¼‰
2. **åœ¨indicator_plotters.pyæ·»åŠ ç»˜å›¾æ–¹æ³•**:
```python
@staticmethod
def plot_new_indicator(fig, df, stock_code) -> bool:
    """ç»˜åˆ¶æ–°æŒ‡æ ‡"""
    try:
        # è°ƒç”¨æŒ‡æ ‡è®¡ç®—
        from indicators.new_indicator import analyze_new_indicator
        result = analyze_new_indicator(df)
        
        # ç»˜åˆ¶å›¾è¡¨
        # ... ç»˜å›¾é€»è¾‘
        
        return True
    except Exception as e:
        logger.error(f"ç»˜åˆ¶æ–°æŒ‡æ ‡å¤±è´¥: {e}")
        return False
```

3. **åœ¨main_window.pyæ·»åŠ UIæ§ä»¶**:
```python
# æ·»åŠ å¤é€‰æ¡†
self.show_new_indicator = tk.BooleanVar(value=False)
ttk.Checkbutton(indicator_control_frame, 
               text="æ–°æŒ‡æ ‡", 
               variable=self.show_new_indicator,
               command=lambda: self._update_indicator_charts()).pack(side=tk.LEFT, padx=10)

# åœ¨_update_indicator_chartsæ–¹æ³•ä¸­æ·»åŠ 
if self.show_new_indicator.get():
    self._create_indicator_chart("æ–°æŒ‡æ ‡", df, stock_code,
                                IndicatorPlotters.plot_new_indicator)
```

## ğŸ”§ å·²çŸ¥é—®é¢˜å’Œå¾…ä¼˜åŒ–é¡¹

### 1. æŒ‡æ ‡å‡½æ•°å‚æ•°ä¸ç»Ÿä¸€
**é—®é¢˜**: éƒ¨åˆ†æŒ‡æ ‡æœŸæœ›(stock_code, date)ï¼Œä½†å½“å‰ä¼ å…¥DataFrame
**å½±å“**: ç»¼åˆT0ç­–ç•¥å’Œä»·æ ¼å‡çº¿åç¦»ï¼ˆä¼˜åŒ–ï¼‰æ— æ³•æ­£å¸¸æ˜¾ç¤º
**è§£å†³æ–¹æ¡ˆ**: 
- æ–¹æ¡ˆA: ç»Ÿä¸€æŒ‡æ ‡æ¥å£ä¸º(df, stock_code)
- æ–¹æ¡ˆB: åœ¨indicator_plottersä¸­é€‚é…ä¸åŒæ¥å£

### 2. æ’­æ”¾åŠŸèƒ½å¾…å®Œå–„
**çŠ¶æ€**: `_play_simulation`æ–¹æ³•ä¸ºå ä½å®ç°
**å¾…å®Œæˆ**: å®ç°é€å¸§æ’­æ”¾åˆ†æ—¶æ•°æ®

### 3. é¼ æ ‡æ‚¬æµ®åŠŸèƒ½
**çŠ¶æ€**: æœªå®ç°
**å¾…å®Œæˆ**: æ·»åŠ é¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼Œæ˜¾ç¤ºæ•°æ®è¯¦æƒ…

## ğŸ“ æœ€ä½³å®è·µ

### æ¨¡å—å¯¼å…¥é¡ºåº
```python
# 1. å…ˆå¯¼å…¥é…ç½®
from visualizer_ui.config import STOCKS, CACHE_DIR

# 2. å†å¯¼å…¥æ•°æ®åŠ è½½
from visualizer_ui.data_loader import DataLoader

# 3. ç„¶åå¯¼å…¥å›¾è¡¨ç®¡ç†
from visualizer_ui.chart_manager import ChartManager
from visualizer_ui.indicator_plotters import IndicatorPlotters

# 4. æœ€åå¯¼å…¥ä¸»çª—å£
from visualizer_ui.main_window import T0DataVisualizer
```

### æ·»åŠ æ–°æ¨¡å—
```python
# 1. åœ¨visualizer_uiç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶
# visualizer_ui/new_module.py

class NewModule:
    def new_method(self):
        pass

# 2. åœ¨__init__.pyä¸­å¯¼å‡º
from .new_module import NewModule

# 3. åœ¨éœ€è¦çš„åœ°æ–¹å¯¼å…¥ä½¿ç”¨
from visualizer_ui import NewModule
```

### å•å…ƒæµ‹è¯•ç¤ºä¾‹
```python
# tests/test_data_loader.py
import unittest
from visualizer_ui.data_loader import DataLoader

class TestDataLoader(unittest.TestCase):
    def setUp(self):
        self.loader = DataLoader()
    
    def test_load_from_cache(self):
        df = self.loader.load_from_cache('600030', '2025-10-24')
        self.assertIsNotNone(df)
        self.assertGreater(len(df), 0)
    
    def test_preprocess_data(self):
        df = self.loader.load_from_cache('600030', '2025-10-24')
        df_processed = self.loader._preprocess_data(df)
        self.assertIn('æ—¶é—´', df_processed.columns)
```

## ğŸŒŸ æ€»ç»“

### å®Œæˆçš„å·¥ä½œ
âœ… å°†1500è¡Œå•æ–‡ä»¶æ‹†åˆ†ä¸º6ä¸ªæ¨¡å—ï¼ˆ~1000è¡Œï¼‰  
âœ… èŒè´£åˆ†ç¦»ï¼Œæ¯ä¸ªæ¨¡å—åŠŸèƒ½å•ä¸€  
âœ… åˆ›å»ºè¯¦ç»†çš„æ¨¡å—æ–‡æ¡£ï¼ˆREADME.mdï¼‰  
âœ… æˆåŠŸè¿è¡Œå¹¶éªŒè¯æ ¸å¿ƒåŠŸèƒ½  
âœ… ä¿ç•™åŸå§‹æ–‡ä»¶ä½œä¸ºå¤‡ä»½  

### å¸¦æ¥çš„å¥½å¤„
âœ… ä»£ç æ›´æ˜“ç»´æŠ¤ï¼ˆæ¨¡å—ç‹¬ç«‹ï¼‰  
âœ… æ¨¡å—å¯ä»¥ç‹¬ç«‹æµ‹è¯•  
âœ… æ–°åŠŸèƒ½æ›´å®¹æ˜“æ·»åŠ   
âœ… ä»£ç å¤ç”¨æ€§æé«˜  
âœ… å›¢é˜Ÿåä½œæ›´æ–¹ä¾¿  
âœ… æ–°äººä¸Šæ‰‹æ›´å®¹æ˜“  

### æ€§èƒ½å½±å“
âœ… å¯åŠ¨é€Ÿåº¦ï¼šæ— æ˜æ˜¾å˜åŒ–ï¼ˆ~3ç§’ï¼‰  
âœ… è¿è¡Œå†…å­˜ï¼šæ— æ˜æ˜¾å¢åŠ ï¼ˆ~150MBï¼‰  
âœ… å›¾è¡¨åˆ·æ–°ï¼šæ€§èƒ½ä¿æŒä¸€è‡´  

### ä¸‹ä¸€æ­¥è®¡åˆ’
1. ä¿®å¤æŒ‡æ ‡å‡½æ•°æ¥å£é—®é¢˜
2. å®Œå–„æ’­æ”¾åŠŸèƒ½å®ç°
3. æ·»åŠ é¼ æ ‡æ‚¬æµ®äº¤äº’
4. ç¼–å†™å®Œæ•´çš„å•å…ƒæµ‹è¯•
5. ä¼˜åŒ–æ•°æ®åŠ è½½æ€§èƒ½
6. æ·»åŠ æ›´å¤šæŠ€æœ¯æŒ‡æ ‡

---

**é‡æ„å®Œæˆåº¦**: 95%  
**ç‰ˆæœ¬**: 2.0 - æ¨¡å—åŒ–ç‰ˆæœ¬  
**æœ€åæ›´æ–°**: 2025-10-26  
**çŠ¶æ€**: âœ… å¯ç”¨ï¼Œæ ¸å¿ƒåŠŸèƒ½æ­£å¸¸

## ğŸ“– ç›¸å…³æ–‡æ¡£

- **æ¨¡å—è¯¦ç»†è¯´æ˜**: `visualizer_ui/README.md`
- **å¸ƒå±€ä¼˜åŒ–è¯´æ˜**: `å¸ƒå±€ä¼˜åŒ–è¯´æ˜.md`
- **æ•°æ®åº“ä¼˜åŒ–è¯´æ˜**: `t0_data_visualizerä¼˜åŒ–è¯´æ˜.md`
- **é¡¹ç›®ç‹¬ç«‹æ€§è¯´æ˜**: `é¡¹ç›®ç‹¬ç«‹æ€§è¯´æ˜.md`
- **æŒ‡æ ‡ä¼˜åŒ–è¯´æ˜**: `indicators/æŒ‡æ ‡ä¼˜åŒ–è¯´æ˜.md`
