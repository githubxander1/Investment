#:kivy 2.3.0

<MainScreen>:
    current_date: ''
    events_dict: {}
    current_events: []
    FloatLayout:
        Button:
            text: 'Statistics'
            pos_hint: {'center_x': 0.5, 'center_y': 0.05}
            on_release: app.show_statistics()

    BoxLayout:
        orientation: 'vertical'
        ScrollView:
            GridLayout:
                id: calendar_grid
                cols: 7
                size_hint_y: None
                height: self.minimum_height
                padding: dp(10)
                spacing: dp(5)
        BoxLayout:
            orientation: 'vertical'
            Label:
                id: date_label
                text: 'Events for ' + root.current_date if root.current_date else 'No Date Selected'
                size_hint_y: None
                height: dp(40)
            GridLayout:
                id: events_grid
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                padding: dp(10)
                spacing: dp(5)
            Button:
                text: 'Add Event'
                on_release: root.add_event()
                size_hint_y: None
                height: dp(40)
            Button:
                text: 'Statistics'
                on_release: app.show_statistics()
                size_hint_y: None
                height: dp(40)

<EditScreen>:
    current_date: ''
    current_title: ''
    current_description: ''
    current_tag: ''
    current_events: []

    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: None
            height: dp(40)
            Button:
                text: '< Back'
                on_release: root.manager.current = 'main'
                size_hint_x: None
                width: dp(100)
            Label:
                text: 'Edit Event'
                size_hint_x: 1
        TextInput:
            id: event_title
            hint_text: 'Event Title'
            multiline: False
        TextInput:
            id: event_description
            hint_text: 'Event Description'
            multiline: True
        TextInput:
            id: event_tag
            hint_text: 'Event Tag'
            multiline: False
        BoxLayout:
            size_hint_y: None
            height: dp(48)
            Button:
                text: 'Save'
                on_release: root.save_event()
                size_hint_x: None
                width: dp(100)
            Button:
                text: 'Delete'
                on_release: root.delete_event()
                size_hint_x: None
                width: dp(100)
        GridLayout:
            id: events_layout
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            padding: dp(10)
            spacing: dp(5)

<StatScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: dp(10)
        spacing: dp(10)
        Label:
            text: 'Statistics'
            font_size: '24sp'
            size_hint_y: None
            height: self.texture_size[1]
        ScrollView:
            GridLayout:
                id: stats_layout
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(10)
                padding: dp(10)
        Button:
            text: 'Back'
            size_hint_y: None
            height: dp(50)
            on_release: app.sm.current = 'main'
    Label:
        id: stat_label
        text: 'Statistics Screen'
        size_hint_y: None
        height: dp(40)
    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None
        height: dp(40)
        Button:
            text: 'Show by Date'
            on_release: root.show_by_date()
            size_hint_x: None
            width: dp(100)
        Button:
            text: 'Show by Tag'
            on_release: root.show_by_tag()
            size_hint_x: None
            width: dp(100)
    Label:
        id: result_label
        text: ''
        size_hint_y: None
        height: dp(40)
