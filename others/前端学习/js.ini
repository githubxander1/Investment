// 定义对象获取需要的dom元素
var doms = {
    carousel: document.querySelector('.carousel'), // 轮播图容器
    indicators: document.querySelectorAll('.container_footer span'), // 轮播图指示器
};

// 创建函数表示当前显示的图片
function moveTo(index) {
    doms.carousel.style.transform = `translateX(-${index * 100}%)`; // 修正transform属性
    // 去除当前选中的指示器
    var active = document.querySelector('.active');
    active.classList.remove('active');
    // 重新选择指示器
    doms.indicators[index].classList.add('active');
}

// 给每个span添加onclick监听事件
doms.indicators.forEach(function(item, i) {
    item.onclick = function() {
        moveTo(i);
    }
});

// 自动轮播板块
function moveLeft() {
    var active = document.querySelector('.active');
    active.classList.remove('active');
    var x = findIndex(active); // 修正函数名
    if (active.nextElementSibling == null) {
        doms.indicators[0].classList.add('active');
        moveTo(0);
    } else {
        active.nextElementSibling.classList.add('active');
        moveTo(x + 1);
    }
}

function autoRun() {
    return setInterval(moveLeft, 1000);
}

var timer = autoRun(); // 调用定时器

// 实现鼠标放上去后停下轮播
doms.carousel.onmouseover = function() {
    clearInterval(timer);
}

doms.carousel.onmouseout = function(event) {
    timer = setInterval(moveLeft, 1000);
}

// 修正findIndex函数
function findIndex(element) {
    return Array.from(doms.indicators).indexOf(element);
}
